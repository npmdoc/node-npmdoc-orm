<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://dresende.github.io/node-orm2"

    >orm (v3.2.3)</a>
</h1>
<h4>NodeJS Object-relational mapping</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm">module orm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Error">
            function <span class="apidocSignatureSpan">orm.</span>Error
            <span class="apidocSignatureSpan">(message, code, extras)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Text">
            function <span class="apidocSignatureSpan">orm.</span>Text
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.addAdapter">
            function <span class="apidocSignatureSpan">orm.</span>addAdapter
            <span class="apidocSignatureSpan">(name, constructor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.between">
            function <span class="apidocSignatureSpan">orm.</span>between
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.connect">
            function <span class="apidocSignatureSpan">orm.</span>connect
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce">
            function <span class="apidocSignatureSpan">orm.</span>enforce.Enforce
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator">
            function <span class="apidocSignatureSpan">orm.</span>enforce.Validator
            <span class="apidocSignatureSpan">(validate)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.eq">
            function <span class="apidocSignatureSpan">orm.</span>eq
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.express">
            function <span class="apidocSignatureSpan">orm.</span>express
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.gt">
            function <span class="apidocSignatureSpan">orm.</span>gt
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.gte">
            function <span class="apidocSignatureSpan">orm.</span>gte
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.like">
            function <span class="apidocSignatureSpan">orm.</span>like
            <span class="apidocSignatureSpan">(expr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.lt">
            function <span class="apidocSignatureSpan">orm.</span>lt
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.lte">
            function <span class="apidocSignatureSpan">orm.</span>lte
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.ne">
            function <span class="apidocSignatureSpan">orm.</span>ne
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.not_between">
            function <span class="apidocSignatureSpan">orm.</span>not_between
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.not_in">
            function <span class="apidocSignatureSpan">orm.</span>not_in
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.not_like">
            function <span class="apidocSignatureSpan">orm.</span>not_like
            <span class="apidocSignatureSpan">(expr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.use">
            function <span class="apidocSignatureSpan">orm.</span>use
            <span class="apidocSignatureSpan">(connection, proto, opts, cb)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Adapters</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Debug</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Error.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>ErrorCodes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Extend</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Hook</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Instance</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>LazyLoad</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Many</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Model</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>One</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Promise</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Property</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>SQL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Settings</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>Utilities</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>_shared</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce.Enforce.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce.Validator.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce.lists</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce.patterns</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce.ranges</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>enforce.security</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>settings</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>singleton</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.</span>validators</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Adapters">module orm.Adapters</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Adapters.add">
            function <span class="apidocSignatureSpan">orm.Adapters.</span>add
            <span class="apidocSignatureSpan">(name, constructor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Adapters.get">
            function <span class="apidocSignatureSpan">orm.Adapters.</span>get
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Debug">module orm.Debug</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Debug.sql">
            function <span class="apidocSignatureSpan">orm.Debug.</span>sql
            <span class="apidocSignatureSpan">(driver, sql)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Error">module orm.Error</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Error.Error">
            function <span class="apidocSignatureSpan">orm.</span>Error
            <span class="apidocSignatureSpan">(message, code, extras)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.Error.</span>codes</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Error.prototype">module orm.Error.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Error.prototype.constructor">
            function <span class="apidocSignatureSpan">orm.Error.prototype.</span>constructor
            <span class="apidocSignatureSpan">(message, code, extras)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Error.prototype.toString">
            function <span class="apidocSignatureSpan">orm.Error.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">orm.Error.prototype.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Extend">module orm.Extend</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Extend.autoFetch">
            function <span class="apidocSignatureSpan">orm.Extend.</span>autoFetch
            <span class="apidocSignatureSpan">(Instance, associations, opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Extend.extend">
            function <span class="apidocSignatureSpan">orm.Extend.</span>extend
            <span class="apidocSignatureSpan">(Model, Instance, Driver, associations, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Extend.prepare">
            function <span class="apidocSignatureSpan">orm.Extend.</span>prepare
            <span class="apidocSignatureSpan">(db, Model, associations)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Hook">module orm.Hook</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Hook.trigger">
            function <span class="apidocSignatureSpan">orm.Hook.</span>trigger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Hook.wait">
            function <span class="apidocSignatureSpan">orm.Hook.</span>wait
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Instance">module orm.Instance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Instance.Instance">
            function <span class="apidocSignatureSpan">orm.</span>Instance
            <span class="apidocSignatureSpan">(Model, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.LazyLoad">module orm.LazyLoad</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.LazyLoad.extend">
            function <span class="apidocSignatureSpan">orm.LazyLoad.</span>extend
            <span class="apidocSignatureSpan">(Instance, Model, properties)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Many">module orm.Many</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Many.autoFetch">
            function <span class="apidocSignatureSpan">orm.Many.</span>autoFetch
            <span class="apidocSignatureSpan">(Instance, associations, opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Many.extend">
            function <span class="apidocSignatureSpan">orm.Many.</span>extend
            <span class="apidocSignatureSpan">(Model, Instance, Driver, associations, opts, createInstance)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Many.prepare">
            function <span class="apidocSignatureSpan">orm.Many.</span>prepare
            <span class="apidocSignatureSpan">(db, Model, associations)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Model">module orm.Model</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Model.Model">
            function <span class="apidocSignatureSpan">orm.</span>Model
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.One">module orm.One</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.One.autoFetch">
            function <span class="apidocSignatureSpan">orm.One.</span>autoFetch
            <span class="apidocSignatureSpan">(Instance, associations, opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.One.extend">
            function <span class="apidocSignatureSpan">orm.One.</span>extend
            <span class="apidocSignatureSpan">(Model, Instance, Driver, associations)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.One.prepare">
            function <span class="apidocSignatureSpan">orm.One.</span>prepare
            <span class="apidocSignatureSpan">(Model, associations)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Promise">module orm.Promise</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Promise.Promise">
            function <span class="apidocSignatureSpan">orm.</span>Promise
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Property">module orm.Property</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Property.normalize">
            function <span class="apidocSignatureSpan">orm.Property.</span>normalize
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.SQL">module orm.SQL</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.SQL.drop">
            function <span class="apidocSignatureSpan">orm.SQL.</span>drop
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.SQL.sync">
            function <span class="apidocSignatureSpan">orm.SQL.</span>sync
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Settings">module orm.Settings</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Settings.Container">
            function <span class="apidocSignatureSpan">orm.Settings.</span>Container
            <span class="apidocSignatureSpan">(settings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Settings.defaults">
            function <span class="apidocSignatureSpan">orm.Settings.</span>defaults
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.Utilities">module orm.Utilities</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.checkConditions">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>checkConditions
            <span class="apidocSignatureSpan">(conditions, one_associations)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.convertPropToJoinKeyProp">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>convertPropToJoinKeyProp
            <span class="apidocSignatureSpan">(props, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.formatField">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>formatField
            <span class="apidocSignatureSpan">(model, name, required, reversed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.getConditions">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>getConditions
            <span class="apidocSignatureSpan">(model, fields, from)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.getRealPath">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>getRealPath
            <span class="apidocSignatureSpan">(path_str, stack_index)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.hasValues">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>hasValues
            <span class="apidocSignatureSpan">(obj, keys)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.populateConditions">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>populateConditions
            <span class="apidocSignatureSpan">(model, fields, source, target, overwrite)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.renameDatastoreFieldsToPropertyNames">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>renameDatastoreFieldsToPropertyNames
            <span class="apidocSignatureSpan">(data, fieldToPropertyMap)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.standardizeOrder">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>standardizeOrder
            <span class="apidocSignatureSpan">(order)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.transformOrderPropertyNames">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>transformOrderPropertyNames
            <span class="apidocSignatureSpan">(order, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.transformPropertyNames">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>transformPropertyNames
            <span class="apidocSignatureSpan">(dataIn, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.values">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>values
            <span class="apidocSignatureSpan">(obj, keys)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.Utilities.wrapFieldObject">
            function <span class="apidocSignatureSpan">orm.Utilities.</span>wrapFieldObject
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm._shared">module orm._shared</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm._shared.eagerQuery">
            function <span class="apidocSignatureSpan">orm._shared.</span>eagerQuery
            <span class="apidocSignatureSpan">(association, opts, keys, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm._shared.execQuery">
            function <span class="apidocSignatureSpan">orm._shared.</span>execQuery
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce">module orm.enforce</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce">
            function <span class="apidocSignatureSpan">orm.enforce.</span>Enforce
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator">
            function <span class="apidocSignatureSpan">orm.enforce.</span>Validator
            <span class="apidocSignatureSpan">(validate)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.equalToProperty">
            function <span class="apidocSignatureSpan">orm.enforce.</span>equalToProperty
            <span class="apidocSignatureSpan">(name, msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.notEmptyString">
            function <span class="apidocSignatureSpan">orm.enforce.</span>notEmptyString
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.required">
            function <span class="apidocSignatureSpan">orm.enforce.</span>required
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.sameAs">
            function <span class="apidocSignatureSpan">orm.enforce.</span>sameAs
            <span class="apidocSignatureSpan">(property, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.unique">
            function <span class="apidocSignatureSpan">orm.enforce.</span>unique
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.enforce.</span>lists</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.enforce.</span>patterns</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.enforce.</span>ranges</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.enforce.</span>security</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.Enforce">module orm.enforce.Enforce</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce.Enforce">
            function <span class="apidocSignatureSpan">orm.enforce.</span>Enforce
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.Enforce.prototype">module orm.enforce.Enforce.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce.prototype.add">
            function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>add
            <span class="apidocSignatureSpan">(property, validator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce.prototype.check">
            function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>check
            <span class="apidocSignatureSpan">(data, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce.prototype.clear">
            function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Enforce.prototype.context">
            function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>context
            <span class="apidocSignatureSpan">(name, value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.Validator">module orm.enforce.Validator</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator.Validator">
            function <span class="apidocSignatureSpan">orm.enforce.</span>Validator
            <span class="apidocSignatureSpan">(validate)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.Validator.prototype">module orm.enforce.Validator.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator.prototype.ifDefined">
            function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifDefined
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator.prototype.ifNotEmptyString">
            function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifNotEmptyString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator.prototype.ifNotType">
            function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifNotType
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator.prototype.ifType">
            function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifType
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.Validator.prototype.validate">
            function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>validate
            <span class="apidocSignatureSpan">(data, next, thisArg, contexts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.lists">module orm.enforce.lists</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.lists.inside">
            function <span class="apidocSignatureSpan">orm.enforce.lists.</span>inside
            <span class="apidocSignatureSpan">(list, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.lists.outside">
            function <span class="apidocSignatureSpan">orm.enforce.lists.</span>outside
            <span class="apidocSignatureSpan">(list, message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.patterns">module orm.enforce.patterns</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.email">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>email
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.hexString">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>hexString
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.ipv4">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>ipv4
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.ipv6">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>ipv6
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.mac">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>mac
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.match">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>match
            <span class="apidocSignatureSpan">(pattern, modifiers, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.uuid3">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>uuid3
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.patterns.uuid4">
            function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>uuid4
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.ranges">module orm.enforce.ranges</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.ranges.length">
            function <span class="apidocSignatureSpan">orm.enforce.ranges.</span>length
            <span class="apidocSignatureSpan">(min, max, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.ranges.number">
            function <span class="apidocSignatureSpan">orm.enforce.ranges.</span>number
            <span class="apidocSignatureSpan">(min, max, message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.enforce.security">module orm.enforce.security</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.security.creditcard">
            function <span class="apidocSignatureSpan">orm.enforce.security.</span>creditcard
            <span class="apidocSignatureSpan">(types, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.security.password">
            function <span class="apidocSignatureSpan">orm.enforce.security.</span>password
            <span class="apidocSignatureSpan">(checks, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.enforce.security.username">
            function <span class="apidocSignatureSpan">orm.enforce.security.</span>username
            <span class="apidocSignatureSpan">(options, message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.settings">module orm.settings</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.settings.get">
            function <span class="apidocSignatureSpan">orm.settings.</span>get
            <span class="apidocSignatureSpan">(key, def)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.settings.set">
            function <span class="apidocSignatureSpan">orm.settings.</span>set
            <span class="apidocSignatureSpan">(key, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.settings.unset">
            function <span class="apidocSignatureSpan">orm.settings.</span>unset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.singleton">module orm.singleton</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.singleton.clear">
            function <span class="apidocSignatureSpan">orm.singleton.</span>clear
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.singleton.get">
            function <span class="apidocSignatureSpan">orm.singleton.</span>get
            <span class="apidocSignatureSpan">(key, opts, createCb, returnCb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.orm.validators">module orm.validators</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.equalToProperty">
            function <span class="apidocSignatureSpan">orm.validators.</span>equalToProperty
            <span class="apidocSignatureSpan">(name, msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.insideList">
            function <span class="apidocSignatureSpan">orm.validators.</span>insideList
            <span class="apidocSignatureSpan">(list, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.notEmptyString">
            function <span class="apidocSignatureSpan">orm.validators.</span>notEmptyString
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.outsideList">
            function <span class="apidocSignatureSpan">orm.validators.</span>outsideList
            <span class="apidocSignatureSpan">(list, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.password">
            function <span class="apidocSignatureSpan">orm.validators.</span>password
            <span class="apidocSignatureSpan">(checks, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.rangeLength">
            function <span class="apidocSignatureSpan">orm.validators.</span>rangeLength
            <span class="apidocSignatureSpan">(min, max, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.rangeNumber">
            function <span class="apidocSignatureSpan">orm.validators.</span>rangeNumber
            <span class="apidocSignatureSpan">(min, max, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.required">
            function <span class="apidocSignatureSpan">orm.validators.</span>required
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.orm.validators.unique">
            function <span class="apidocSignatureSpan">orm.validators.</span>unique
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">orm.validators.</span>patterns</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm" id="apidoc.module.orm">module orm</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Error" id="apidoc.element.orm.Error">
        function <span class="apidocSignatureSpan">orm.</span>Error
        <span class="apidocSignatureSpan">(message, code, extras)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ORMError(message, code, extras) {
  Error.call(this);
  Error.captureStackTrace(this, this.constructor);

  this.message = message;
  if (code) {
  	this.code = codes[code];
    this.literalCode = code;
    if (!this.code) {
  		throw new Error(&#x22;Invalid error code: &#x22; +  code);
  	}
  }
  if (extras) {
  	for(var k in extras) {
  		this[k] = extras[k];
  	}
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Text" id="apidoc.element.orm.Text">
        function <span class="apidocSignatureSpan">orm.</span>Text
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Text = function (data) {
		var o = { data: data };

		Object.defineProperty(o, &#x22;type&#x22;, {
			value: function () {
				return type;
			},
			enumerable: false
		});

		return o;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.addAdapter" id="apidoc.element.orm.addAdapter">
        function <span class="apidocSignatureSpan">orm.</span>addAdapter
        <span class="apidocSignatureSpan">(name, constructor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addAdapter(name, constructor) {
  adapters[name] = constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


# Creating database adapters for orm2

To add a database adapter to `orm`, call its `addAdapter` method:

```js
require(&#x27;orm2&#x27;).<span class="apidocCodeKeywordSpan">addAdapter</span>(&#x27;cassandra&#x27;, CassandraAdapter);
```

The first argument is the alias to register for connection URLs. For example, the above will allow you to do this:

```js
var orm = require(&#x27;orm2&#x27;);
orm.connect(&#x27;cassandra://username:password@localhost/test&#x27;, function (err, db) { });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.between" id="apidoc.element.orm.between">
        function <span class="apidocSignatureSpan">orm.</span>between
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">between = function (a, b) {
	return createSpecialObject({ from: a, to: b }, &#x27;between&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
{ col1: orm.eq(123) } // `col1` = 123 (default)
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.<span class="apidocCodeKeywordSpan">between</span>(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```

#### Raw queries
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.connect" id="apidoc.element.orm.connect">
        function <span class="apidocSignatureSpan">orm.</span>connect
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (opts, cb) {
	if (arguments.length === 0 || !opts) {
		return ORM_Error(new ORMError(&#x22;CONNECTION_URL_EMPTY&#x22;, &#x27;PARAM_MISMATCH&#x27;), cb);
	}
	if (typeof opts == &#x27;string&#x27;) {
		if (opts.trim().length === 0) {
			return ORM_Error(new ORMError(&#x22;CONNECTION_URL_EMPTY&#x22;, &#x27;PARAM_MISMATCH&#x27;), cb);
		}
		opts = url.parse(opts, true);
	} else if (typeof opts == &#x27;object&#x27;) {
		opts = _.cloneDeep(opts);
	}

	opts.query = opts.query || {};

	for(var k in opts.query) {
		opts.query[k] = queryParamCast(opts.query[k]);
		opts[k] = opts.query[k];
	}

	if (!opts.database) {
		// if (!opts.pathname) {
		// 	return cb(new Error(&#x22;CONNECTION_URL_NO_DATABASE&#x22;));
		// }
		opts.database = (opts.pathname ? opts.pathname.substr(1) : &#x22;&#x22;);
	}
	if (!opts.protocol) {
		return ORM_Error(new ORMError(&#x22;CONNECTION_URL_NO_PROTOCOL&#x22;, &#x27;PARAM_MISMATCH&#x27;), cb);
	}
	// if (!opts.host) {
	// 	opts.host = opts.hostname = &#x22;localhost&#x22;;
	// }
	if (opts.auth) {
		opts.user = opts.auth.split(&#x22;:&#x22;)[0];
		opts.password = opts.auth.split(&#x22;:&#x22;)[1];
	}
	if (!opts.hasOwnProperty(&#x22;user&#x22;)) {
		opts.user = &#x22;root&#x22;;
	}
	if (!opts.hasOwnProperty(&#x22;password&#x22;)) {
		opts.password = &#x22;&#x22;;
	}
	if (opts.hasOwnProperty(&#x22;hostname&#x22;)) {
		opts.host = opts.hostname;
	}

	var proto  = opts.protocol.replace(/:$/, &#x27;&#x27;);
	var db;
	if (DriverAliases[proto]) {
		proto = DriverAliases[proto];
	}

	try {
		var Driver   = adapters.get(proto);
		var settings = new Settings.Container(exports.settings.get(&#x27;*&#x27;));
		var driver   = new Driver(opts, null, {
			debug    : &#x27;debug&#x27; in opts.query ? opts.query.debug : settings.get(&#x22;connection.debug&#x22;),
			pool     : &#x27;pool&#x27;  in opts.query ? opts.query.pool  : settings.get(&#x22;connection.pool&#x22;),
			settings : settings
		});

		db = new ORM(proto, driver, settings);

		driver.connect(function (err) {
			if (typeof cb === &#x22;function&#x22;) {
				if (err) {
					return cb(err);
				} else {
					return cb(null, db);
				}
			}

			db.emit(&#x22;connect&#x22;, err, !err ? db : null);
		});
	} catch (ex) {
		if (ex.code === &#x22;MODULE_NOT_FOUND&#x22; || ex.message.indexOf(&#x27;find module&#x27;) &#x3e; -1) {
			return ORM_Error(new ORMError(&#x22;Connection protocol not supported - have you installed the database driver for &#x22; + proto + &#x22;?&#x22;, &#x27;
NO_SUPPORT&#x27;), cb);
		}
		return ORM_Error(ex, cb);
	}

	return db;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
require(&#x27;orm2&#x27;).addAdapter(&#x27;cassandra&#x27;, CassandraAdapter);
```

The first argument is the alias to register for connection URLs. For example, the above will allow you to do this:

```js
var orm = require(&#x27;orm2&#x27;);
orm.<span class="apidocCodeKeywordSpan">connect</span>(&#x27;cassandra://username:password@localhost/test&#x27;, function (err,
db) { });
```

The second argument is the constructor for your adapter object.

## Defining adapters

Your adapter should provide the following members.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce" id="apidoc.element.orm.enforce.Enforce">
        function <span class="apidocSignatureSpan">orm.</span>enforce.Enforce
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Enforce(options) {
    this.validations = {};
    this.contexts = {};
    this.options = {
        returnAllErrors: options &#x26;&#x26; !!options.returnAllErrors
    };

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Validator" id="apidoc.element.orm.enforce.Validator">
        function <span class="apidocSignatureSpan">orm.</span>enforce.Validator
        <span class="apidocSignatureSpan">(validate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Validator(validate) {
    this.validator = validate;
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.eq" id="apidoc.element.orm.eq">
        function <span class="apidocSignatureSpan">orm.</span>eq
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eq = function (v) {
	return createSpecialObject({ val: v }, &#x27;eq&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{ col1: [ 1, 3, 5 ] } // `col1` IN (1, 3, 5)
```

If you need other comparisons, you have to use a special object created by some helper functions. Here are
a few examples to describe it:

```js
{ col1: orm.<span class="apidocCodeKeywordSpan">eq</span>(123) } // `col1` = 123 (default)
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.express" id="apidoc.element.orm.express">
        function <span class="apidocSignatureSpan">orm.</span>express
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">express = function () {
	return require(&#x22;./Express&#x22;).apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
If you&#x27;re using Express, you might want to use the simple middleware to integrate more easily.

```js
var express = require(&#x27;express&#x27;);
var orm = require(&#x27;orm&#x27;);
var app = express();

app.use(orm.<span class="apidocCodeKeywordSpan">express</span>(&#x22;mysql://username:password@host/database&#x22;, {
	define: function (db, models, next) {
		models.person = db.define(&#x22;person&#x22;, { ... });
		next();
	}
}));
app.listen(80);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.gt" id="apidoc.element.orm.gt">
        function <span class="apidocSignatureSpan">orm.</span>gt
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">gt = function (v) {
	return createSpecialObject({ val: v }, &#x27;gt&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
var Person = db.define(&#x27;person&#x27;, {
    name    : String,
    height  : { type: &#x27;integer&#x27; }
});
Person.tallerThan = function(height, callback) {
    this.find({ height: orm.<span class="apidocCodeKeywordSpan">gt</span>(height) }, callback);
};

Person.tallerThan( 192, function(err, tallPeople) { ... } );
```


## Loading Models
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.gte" id="apidoc.element.orm.gte">
        function <span class="apidocSignatureSpan">orm.</span>gte
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">gte = function (v) {
	return createSpecialObject({ val: v }, &#x27;gte&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
If you need other comparisons, you have to use a special object created by some helper functions. Here are
a few examples to describe it:

```js
{ col1: orm.eq(123) } // `col1` = 123 (default)
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.<span class="apidocCodeKeywordSpan">gte</span>(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.like" id="apidoc.element.orm.like">
        function <span class="apidocSignatureSpan">orm.</span>like
        <span class="apidocSignatureSpan">(expr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">like = function (expr) {
	return createSpecialObject({ expr: expr }, &#x27;like&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.<span class="apidocCodeKeywordSpan">like</span>(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```

#### Raw queries

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.lt" id="apidoc.element.orm.lt">
        function <span class="apidocSignatureSpan">orm.</span>lt
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lt = function (v) {
	return createSpecialObject({ val: v }, &#x27;lt&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
a few examples to describe it:

```js
{ col1: orm.eq(123) } // `col1` = 123 (default)
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.<span class="apidocCodeKeywordSpan">lt</span>(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.lte" id="apidoc.element.orm.lte">
        function <span class="apidocSignatureSpan">orm.</span>lte
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lte = function (v) {
	return createSpecialObject({ val: v }, &#x27;lte&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
{ col1: orm.eq(123) } // `col1` = 123 (default)
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.<span class="apidocCodeKeywordSpan">lte</span>(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.ne" id="apidoc.element.orm.ne">
        function <span class="apidocSignatureSpan">orm.</span>ne
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ne = function (v) {
	return createSpecialObject({ val: v }, &#x27;ne&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

If you need other comparisons, you have to use a special object created by some helper functions. Here are
a few examples to describe it:

```js
{ col1: orm.eq(123) } // `col1` = 123 (default)
{ col1: orm.<span class="apidocCodeKeywordSpan">ne</span>(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.not_between" id="apidoc.element.orm.not_between">
        function <span class="apidocSignatureSpan">orm.</span>not_between
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">not_between = function (a, b) {
	return createSpecialObject({ from: a, to: b }, &#x27;not_between&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{ col1: orm.eq(123) } // `col1` = 123 (default)
{ col1: orm.ne(123) } // `col1` &#x3c;&#x3e; 123
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.<span class="apidocCodeKeywordSpan">not_between</span>(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```

#### Raw queries
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.not_in" id="apidoc.element.orm.not_in">
        function <span class="apidocSignatureSpan">orm.</span>not_in
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">not_in = function (v) {
	return createSpecialObject({ val: v }, &#x27;not_in&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.<span class="apidocCodeKeywordSpan">not_in</span>([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```

#### Raw queries

```js
db.driver.execQuery(&#x22;SELECT id, email FROM user&#x22;, function (err, data) { ... })
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.not_like" id="apidoc.element.orm.not_like">
        function <span class="apidocSignatureSpan">orm.</span>not_like
        <span class="apidocSignatureSpan">(expr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">not_like = function (expr) {
	return createSpecialObject({ expr: expr }, &#x27;not_like&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{ col1: orm.gt(123) } // `col1` &#x3e; 123
{ col1: orm.gte(123) } // `col1` &#x3e;= 123
{ col1: orm.lt(123) } // `col1` &#x3c; 123
{ col1: orm.lte(123) } // `col1` &#x3c;= 123
{ col1: orm.between(123, 456) } // `col1` BETWEEN 123 AND 456
{ col1: orm.not_between(123, 456) } // `col1` NOT BETWEEN 123 AND 456
{ col1: orm.like(12 + &#x22;%&#x22;) } // `col1` LIKE &#x27;12%&#x27;
{ col1: orm.<span class="apidocCodeKeywordSpan">not_like</span>(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```

#### Raw queries

```js
db.driver.execQuery(&#x22;SELECT id, email FROM user&#x22;, function (err, data) { ... })
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.use" id="apidoc.element.orm.use">
        function <span class="apidocSignatureSpan">orm.</span>use
        <span class="apidocSignatureSpan">(connection, proto, opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function (connection, proto, opts, cb) {
	if (DriverAliases[proto]) {
		proto = DriverAliases[proto];
	}
	if (typeof opts === &#x22;function&#x22;) {
		cb = opts;
		opts = {};
	}

	try {
		var Driver   = adapters.get(proto);
		var settings = new Settings.Container(exports.settings.get(&#x27;*&#x27;));
		var driver   = new Driver(null, connection, {
			debug    : (opts.query &#x26;&#x26; opts.query.debug === &#x27;true&#x27;),
			settings : settings
		});

		return cb(null, new ORM(proto, driver, settings));
	} catch (ex) {
		return cb(ex);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Reduces the size of mysql driver
- Adds initial support for multi primary key models
- Updates DB.define() and Model.get() to support tables with multiple primary keys ([#135](../../issues/135))
- Creates Model.all() as alias to Model.find(), adds simple example
- Fixes autoFetch option not being considered in Model.find() ([#120](../../issues/120))
- Adds support for chaining and rechaining with ChainFind
- Fixes bug about connection config object not having query key (fixes [#130](../../issues/130))
- Adds initial plugin architecture - .<span class="apidocCodeKeywordSpan">use</span>() ([#121](../../issues/121))
- Fixes some bugs
- Adds more tests

### v2.0.9 - 18 Apr 2013

- Correct &#x27;returnAllErrors&#x27; setting behaviour
- Adds default settings properties.required = false ([#110](../../issues/110))
...</pre></li>
    </ul>
























































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Adapters" id="apidoc.module.orm.Adapters">module orm.Adapters</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Adapters.add" id="apidoc.element.orm.Adapters.add">
        function <span class="apidocSignatureSpan">orm.Adapters.</span>add
        <span class="apidocSignatureSpan">(name, constructor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addAdapter(name, constructor) {
  adapters[name] = constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						}
					}
				}
				if (!alwaysValidate &#x26;&#x26; !required &#x26;&#x26; instance[k] == null) {
					continue; // avoid validating if property is not required and is &#x22;empty&#x22;
				}
				for (i = 0; i &#x3c; opts.validations[k].length; i++) {
					checks.<span class="apidocCodeKeywordSpan">add</span>(k, opts.validations[k][i]);
				}
			}

			checks.context(&#x22;instance&#x22;, instance);
			checks.context(&#x22;model&#x22;, Model);
			checks.context(&#x22;driver&#x22;, opts.driver);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Adapters.get" id="apidoc.element.orm.Adapters.get">
        function <span class="apidocSignatureSpan">orm.Adapters.</span>get
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getAdapter(name) {
  if (name in aliases) {
    return getAdapter(aliases[name]);
  } else if (!(name in adapters)) {
    adapters[name] = require(&#x22;./Drivers/DML/&#x22; + name).Driver;
  }

  return adapters[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Add `enumerable` flag to exclude instance properties from enumeration ([#724](../../issues/724))

### v3.0.0
- Rename `cache` -&#x3e; `identityCache` and **disable by default** ([#350](../../issues/350), [#564](../../issues/564), [#626](../../
issues/626), [#672](../../issues/672), [#684](../../issues/684), [#694](../../issues/694), [#721](../../issues/721))

**This is a potentially breaking change:**
```js
User.<span class="apidocCodeKeywordSpan">get</span>(14, (err, userA) =&#x3e;
User.get(14, (err, userB) =&#x3e;
  // v2
  userA    == userB
  userA.id == userB.id
  // v3, identity cache is now disabled by default
  userA    != userB
  userA.id == userB.id
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Debug" id="apidoc.module.orm.Debug">module orm.Debug</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Debug.sql" id="apidoc.element.orm.Debug.sql">
        function <span class="apidocSignatureSpan">orm.Debug.</span>sql
        <span class="apidocSignatureSpan">(driver, sql)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sql = function (driver, sql) {
	var fmt;

	if (tty.isatty(process.stdout)) {
		fmt = &#x22;\033[32;1m(orm/%s) \033[34m%s\033[0m\n&#x22;;
		sql = sql.replace(/`(.+?)`/g, function (m) { return &#x22;\033[31m&#x22; + m + &#x22;\033[34m&#x22;; });
	} else {
		fmt = &#x22;[SQL/%s] %s\n&#x22;;
	}

	process.stdout.write(util.format(fmt, driver, sql));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Driver.prototype.getQuery = function () {
	return this.query;
};

Driver.prototype.execSimpleQuery = function (query, cb) {
	if (this.opts.debug) {
		require(&#x22;../../Debug&#x22;).<span class="apidocCodeKeywordSpan">sql</span>(&#x27;mysql&#x27;, query);
	}
	if (this.opts.pool) {
		this.poolQuery(query, cb);
	} else {
		this.db.query(query, cb);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Error" id="apidoc.module.orm.Error">module orm.Error</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Error.Error" id="apidoc.element.orm.Error.Error">
        function <span class="apidocSignatureSpan">orm.</span>Error
        <span class="apidocSignatureSpan">(message, code, extras)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ORMError(message, code, extras) {
  Error.call(this);
  Error.captureStackTrace(this, this.constructor);

  this.message = message;
  if (code) {
  	this.code = codes[code];
    this.literalCode = code;
    if (!this.code) {
  		throw new Error(&#x22;Invalid error code: &#x22; +  code);
  	}
  }
  if (extras) {
  	for(var k in extras) {
  		this[k] = extras[k];
  	}
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Error.prototype" id="apidoc.module.orm.Error.prototype">module orm.Error.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Error.prototype.constructor" id="apidoc.element.orm.Error.prototype.constructor">
        function <span class="apidocSignatureSpan">orm.Error.prototype.</span>constructor
        <span class="apidocSignatureSpan">(message, code, extras)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ORMError(message, code, extras) {
  Error.call(this);
  Error.captureStackTrace(this, this.constructor);

  this.message = message;
  if (code) {
  	this.code = codes[code];
    this.literalCode = code;
    if (!this.code) {
  		throw new Error(&#x22;Invalid error code: &#x22; +  code);
  	}
  }
  if (extras) {
  	for(var k in extras) {
  		this[k] = extras[k];
  	}
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Error.prototype.toString" id="apidoc.element.orm.Error.prototype.toString">
        function <span class="apidocSignatureSpan">orm.Error.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  return &#x27;[ORMError &#x27; + this.literalCode + &#x27;: &#x27; + this.message + &#x27;]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		obj[k] = convertToDBVal(k, obj[k], timeZone);
	}
}

function convertFromDB(obj, timezone) {
	for (var k in obj) {
		if (obj[k] instanceof mongodb.ObjectID) {
			obj[k] = obj[k].<span class="apidocCodeKeywordSpan">toString</span>();
			continue;
		}
		if (obj[k] instanceof mongodb.Binary) {
			obj[k] = new Buffer(obj[k].value(), &#x22;binary&#x22;);
			continue;
		}
	}
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Extend" id="apidoc.module.orm.Extend">module orm.Extend</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Extend.autoFetch" id="apidoc.element.orm.Extend.autoFetch">
        function <span class="apidocSignatureSpan">orm.Extend.</span>autoFetch
        <span class="apidocSignatureSpan">(Instance, associations, opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">autoFetch = function (Instance, associations, opts, cb) {
	if (associations.length === 0) {
		return cb();
	}

	var pending = associations.length;
	var autoFetchDone = function autoFetchDone() {
		pending -= 1;

		if (pending === 0) {
			return cb();
		}
	};

	for (var i = 0; i &#x3c; associations.length; i++) {
		autoFetchInstance(Instance, associations[i], opts, autoFetchDone);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return cb(err || create_err, instance);
			}
		});
		if (model_fields !== null) {
			LazyLoad.extend(instance, model, opts.properties);
		}

		OneAssociation.<span class="apidocCodeKeywordSpan">autoFetch</span>(instance, one_associations, assoc_opts, function () {
			ManyAssociation.autoFetch(instance, many_associations, assoc_opts, function () {
				ExtendAssociation.autoFetch(instance, extend_associations, assoc_opts, function () {
					Hook.wait(instance, opts.hooks.afterAutoFetch, function (err) {
						if (--pending &#x3e; 0) {
							create_err = err;
							return;
						}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Extend.extend" id="apidoc.element.orm.Extend.extend">
        function <span class="apidocSignatureSpan">orm.Extend.</span>extend
        <span class="apidocSignatureSpan">(Model, Instance, Driver, associations, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (Model, Instance, Driver, associations, opts) {
	for (var i = 0; i &#x3c; associations.length; i++) {
		extendInstance(Model, Instance, Driver, associations[i], opts);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			opts.conditions = opts.conditions || {};

			if (typeof _.last(args) === &#x22;function&#x22;) {
			    cb = args.pop();
			}

			if (typeof args[0] === &#x22;object&#x22;) {
				_.<span class="apidocCodeKeywordSpan">extend</span>(opts.conditions, args[0]);
			} else if (typeof args[0] === &#x22;string&#x22;) {
				opts.conditions.__sql = opts.conditions.__sql || [];
				opts.conditions.__sql.push(args);
			}

			if (cb) {
				chainRun(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Extend.prepare" id="apidoc.element.orm.Extend.prepare">
        function <span class="apidocSignatureSpan">orm.Extend.</span>prepare
        <span class="apidocSignatureSpan">(db, Model, associations)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepare = function (db, Model, associations) {
	Model.extendsTo = function (name, properties, opts) {
		opts = opts || {};

		var assocName = opts.name || ucfirst(name);
		var association = {
			name           : name,
			table          : opts.table || (Model.table + &#x27;_&#x27; + name),
			reversed       : opts.reversed,
			autoFetch      : opts.autoFetch || false,
			autoFetchLimit : opts.autoFetchLimit || 2,
			field          : util.wrapFieldObject({
												 field: opts.field, model: Model, altName: Model.table
											 }) || util.formatField(Model, Model.table, false, false),
			getAccessor    : opts.getAccessor || (&#x22;get&#x22; + assocName),
			setAccessor    : opts.setAccessor || (&#x22;set&#x22; + assocName),
			hasAccessor    : opts.hasAccessor || (&#x22;has&#x22; + assocName),
			delAccessor    : opts.delAccessor || (&#x22;remove&#x22; + assocName)
		};

		var newproperties = _.cloneDeep(properties);
		for (var k in association.field) {
		    newproperties[k] = association.field[k];
		}

		var modelOpts = _.extend(
			_.pick(opts, &#x27;identityCache&#x27;, &#x27;autoSave&#x27;, &#x27;cascadeRemove&#x27;, &#x27;hooks&#x27;, &#x27;methods&#x27;, &#x27;validations&#x27;),
			{
				id        : Object.keys(association.field),
				extension : true,
			}
		);

		association.model = db.define(association.table, newproperties, modelOpts);
		association.model.hasOne(Model.table, Model, { extension: true, field: association.field });

		associations.push(association);

		Model[&#x22;findBy&#x22; + assocName] = function () {
			var cb = null, conditions = null, options = {};

			for (var i = 0; i &#x3c; arguments.length; i++) {
				switch (typeof arguments[i]) {
					case &#x22;function&#x22;:
						cb = arguments[i];
						break;
					case &#x22;object&#x22;:
						if (conditions === null) {
							conditions = arguments[i];
						} else {
							options = arguments[i];
						}
						break;
				}
			}

			if (conditions === null) {
				throw new ORMError(&#x22;.findBy(&#x22; + assocName + &#x22;) is missing a conditions object&#x22;, &#x27;PARAM_MISMATCH&#x27;);
			}

			options.__merge = {
				from  : { table: association.model.table, field: Object.keys(association.field) },
				to    : { table: Model.table, field: Model.id },
				where : [ association.model.table, conditions ],
				table : Model.table
			};
			options.extra = [];

			if (typeof cb == &#x22;function&#x22;) {
				return Model.find({}, options, cb);
			}
			return Model.find({}, options);
		};

		return association.model;
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	// setup hooks
	for (k in AvailableHooks) {
		model[AvailableHooks[k]] = createHookHelper(AvailableHooks[k]);
	}

	OneAssociation.<span class="apidocCodeKeywordSpan">prepare</span>(model, one_associations);
	ManyAssociation.prepare(opts.db, model, many_associations);
	ExtendAssociation.prepare(opts.db, model, extend_associations);

	return model;
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Hook" id="apidoc.module.orm.Hook">module orm.Hook</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Hook.trigger" id="apidoc.element.orm.Hook.trigger">
        function <span class="apidocSignatureSpan">orm.Hook.</span>trigger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trigger = function () {
	var args = Array.prototype.slice.apply(arguments);
	var self = args.shift();
	var cb   = args.shift();

	if (typeof cb === &#x22;function&#x22;) {
		cb.apply(self, args);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		});
	};
	var saveError = function (cb, err) {
		instance_saving = false;

		emitEvent(&#x22;save&#x22;, err, instance);

		Hook.<span class="apidocCodeKeywordSpan">trigger</span>(instance, opts.hooks.afterSave, false);

		if (typeof cb === &#x22;function&#x22;) {
			cb(err, instance);
		}
	};
	var saveInstance = function (saveOptions, cb) {
		// what this condition means:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Hook.wait" id="apidoc.element.orm.Hook.wait">
        function <span class="apidocSignatureSpan">orm.Hook.</span>wait
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wait = function () {
	var args = Array.prototype.slice.apply(arguments);
	var self = args.shift();
	var cb   = args.shift();
	var next = args.shift();

	args.push(next);

	if (typeof cb === &#x22;function&#x22;) {
		cb.apply(self, args);

		if (cb.length &#x3c; args.length) {
			return next();
		}
	} else {
		return next();
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Changes Model.one() to return only one instance (or null) instead of an Array ([#148](../../issues/148))
- Allow passing a single object to Model.create() ([#159](../../issues/159))
- Fixes passing unknown properties to new instances (fixes [#178](../../issues/178))
- Adds AggregateFunctions.limit() ([#172](../../issues/172))
- Checks for driver debug flag and prints debug lines in AggregateFunctions ([#171](../../issues/171))
- Added Hook &#x27;beforeValidation&#x27; prior to _all_ validations
- Avoids JSON parsing values when they are already objects (and not string buffers) ([#168](../../issues/168))
- Changes beforeRemove, beforeCreate, beforeSave and beforeValidation to use Hooks.<span class="apidocCodeKeywordSpan">wait</span
>() (sync or async hooks) ([#167](../../issues/167))
- Support specifying size of number columns
- Many more bug fixes
- More tests added
- Many documentation improvements

### v2.0.11 - 3 May 2013
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Instance" id="apidoc.module.orm.Instance">module orm.Instance</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Instance.Instance" id="apidoc.element.orm.Instance.Instance">
        function <span class="apidocSignatureSpan">orm.</span>Instance
        <span class="apidocSignatureSpan">(Model, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Instance(Model, opts) {
	opts = opts || {};
	opts.data = opts.data || {};
	opts.extra = opts.extra || {};
	opts.keys = opts.keys || &#x22;id&#x22;;
	opts.changes = (opts.is_new ? Object.keys(opts.data) : []);
	opts.extrachanges = [];
	opts.associations = {};
	opts.originalKeyValues = {};

	var instance_saving = false;
	var events = {};
	var instance = {};
	var emitEvent = function () {
		var args = Array.prototype.slice.apply(arguments);
		var event = args.shift();

		if (!events.hasOwnProperty(event)) return;

		events[event].map(function (cb) {
			cb.apply(instance, args);
		});
	};
	var rememberKeys = function () {
		var i, prop;

		for(i = 0; i &#x3c; opts.keyProperties.length; i++) {
			prop = opts.keyProperties[i];
			opts.originalKeyValues[prop.name] = opts.data[prop.name];
		}
	};
	var shouldSaveAssocs = function (saveOptions) {
		if (Model.settings.get(&#x22;instance.saveAssociationsByDefault&#x22;)) {
			return saveOptions.saveAssociations !== false;
		} else {
			return !!saveOptions.saveAssociations;
		}
	};
	var handleValidations = function (cb) {
		var pending = [], errors = [], required, alwaysValidate;

		Hook.wait(instance, opts.hooks.beforeValidation, function (err) {
		    var k, i;
			if (err) {
				return saveError(cb, err);
			}

			var checks = new enforce.Enforce({
				returnAllErrors : Model.settings.get(&#x22;instance.returnAllErrors&#x22;)
			});

			for (k in opts.validations) {
				required = false;

				if (Model.allProperties[k]) {
					required = Model.allProperties[k].required;
					alwaysValidate = Model.allProperties[k].alwaysValidate;
				} else {
					for (i = 0; i &#x3c; opts.one_associations.length; i++) {
						if (opts.one_associations[i].field === k) {
							required = opts.one_associations[i].required;
							break;
						}
					}
				}
				if (!alwaysValidate &#x26;&#x26; !required &#x26;&#x26; instance[k] == null) {
					continue; // avoid validating if property is not required and is &#x22;empty&#x22;
				}
				for (i = 0; i &#x3c; opts.validations[k].length; i++) {
					checks.add(k, opts.validations[k][i]);
				}
			}

			checks.context(&#x22;instance&#x22;, instance);
			checks.context(&#x22;model&#x22;, Model);
			checks.context(&#x22;driver&#x22;, opts.driver);

			return checks.check(instance, cb);
		});
	};
	var saveError = function (cb, err) {
		instance_saving = false;

		emitEvent(&#x22;save&#x22;, err, instance);

		Hook.trigger(instance, opts.hooks.afterSave, false);

		if (typeof cb === &#x22;function&#x22;) {
			cb(err, instance);
		}
	};
	var saveInstance = function (saveOptions, cb) {
		// what this condition means:
		// - If the instance is in state mode
		// - AND it&#x27;s not an association that is asking it to save
		//   -&#x3e; return has already saved
		if (instance_saving &#x26;&#x26; saveOptions.saveAssociations !== false) {
			return cb(null, instance);
		}
		instance_saving = true;

		handleValidations(function (err) {
			if (err) {
				return saveError(cb, err);
			}

			if (opts.is_new) {
				waitHooks([ &#x22;beforeCreate&#x22;, &#x22;beforeSave&#x22; ], function (err) {
					if (err) {
						return saveError(cb, err);
					}

					return saveNew(saveOptions, getInstanceData(), cb);
				});
			} else {
				waitHooks([ &#x22;beforeSave&#x22; ], function (err) {
					if (err) {
						return saveError(cb, err);
					}

					return savePersisted(saveOptions, getInstanceData(), cb);
				});
			}
		});
	};
	var runAfterSaveActions = function (cb, create, err) {
		instance_saving = false;

		emitEvent(&#x22;save&#x22;, err, instance);

		if (create) {
			Hook.trigger(instance, opts.hooks.afterCreate, !err);
		}
		Hook.trigger(instance, opts.hooks.afterSave, !err);

		cb();
	};
	var getInstanceData = function () {
		var data = {}, prop;
		for (var k in opts.data) {
			if (!opts.data.hasOwnProperty(k)) continue;
			prop = Model.allProperties[k];

			if (prop) {
				if (opts.data[k] == null &#x26;&#x26;  (prop.type == &#x27;serial&#x27; || typeof prop.defaultValue == &#x27;function&#x27;)) {
					continue;
				}

				if (opts.driver.propertyToValue) {
					data[k] = opts.driver.propertyToValue(opts.data[k], prop);
				} else {
					data[k] = opts.data[k];
				}
			} else {
				data[k] = opts.data[k];
			}
		}

		return data;
	};
	var waitHooks = function ( ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.LazyLoad" id="apidoc.module.orm.LazyLoad">module orm.LazyLoad</a></h1>


    <h2>
        <a href="#apidoc.element.orm.LazyLoad.extend" id="apidoc.element.orm.LazyLoad.extend">
        function <span class="apidocSignatureSpan">orm.LazyLoad.</span>extend
        <span class="apidocSignatureSpan">(Instance, Model, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (Instance, Model, properties) {
	for (var k in properties) {
		if (properties[k].lazyload === true) {
			addLazyLoadProperty(properties[k].lazyname || k, Instance, Model, k);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			opts.conditions = opts.conditions || {};

			if (typeof _.last(args) === &#x22;function&#x22;) {
			    cb = args.pop();
			}

			if (typeof args[0] === &#x22;object&#x22;) {
				_.<span class="apidocCodeKeywordSpan">extend</span>(opts.conditions, args[0]);
			} else if (typeof args[0] === &#x22;string&#x22;) {
				opts.conditions.__sql = opts.conditions.__sql || [];
				opts.conditions.__sql.push(args);
			}

			if (cb) {
				chainRun(cb);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Many" id="apidoc.module.orm.Many">module orm.Many</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Many.autoFetch" id="apidoc.element.orm.Many.autoFetch">
        function <span class="apidocSignatureSpan">orm.Many.</span>autoFetch
        <span class="apidocSignatureSpan">(Instance, associations, opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">autoFetch = function (Instance, associations, opts, cb) {
	if (associations.length === 0) {
		return cb();
	}

	var pending = associations.length;
	var autoFetchDone = function autoFetchDone() {
		pending -= 1;

		if (pending === 0) {
			return cb();
		}
	};

	for (var i = 0; i &#x3c; associations.length; i++) {
		autoFetchInstance(Instance, associations[i], opts, autoFetchDone);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return cb(err || create_err, instance);
			}
		});
		if (model_fields !== null) {
			LazyLoad.extend(instance, model, opts.properties);
		}

		OneAssociation.<span class="apidocCodeKeywordSpan">autoFetch</span>(instance, one_associations, assoc_opts, function () {
			ManyAssociation.autoFetch(instance, many_associations, assoc_opts, function () {
				ExtendAssociation.autoFetch(instance, extend_associations, assoc_opts, function () {
					Hook.wait(instance, opts.hooks.afterAutoFetch, function (err) {
						if (--pending &#x3e; 0) {
							create_err = err;
							return;
						}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Many.extend" id="apidoc.element.orm.Many.extend">
        function <span class="apidocSignatureSpan">orm.Many.</span>extend
        <span class="apidocSignatureSpan">(Model, Instance, Driver, associations, opts, createInstance)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (Model, Instance, Driver, associations, opts, createInstance) {
	for (var i = 0; i &#x3c; associations.length; i++) {
		extendInstance(Model, Instance, Driver, associations[i], opts, createInstance);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			opts.conditions = opts.conditions || {};

			if (typeof _.last(args) === &#x22;function&#x22;) {
			    cb = args.pop();
			}

			if (typeof args[0] === &#x22;object&#x22;) {
				_.<span class="apidocCodeKeywordSpan">extend</span>(opts.conditions, args[0]);
			} else if (typeof args[0] === &#x22;string&#x22;) {
				opts.conditions.__sql = opts.conditions.__sql || [];
				opts.conditions.__sql.push(args);
			}

			if (cb) {
				chainRun(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Many.prepare" id="apidoc.element.orm.Many.prepare">
        function <span class="apidocSignatureSpan">orm.Many.</span>prepare
        <span class="apidocSignatureSpan">(db, Model, associations)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepare = function (db, Model, associations) {
	Model.hasMany = function () {
		var name, makeKey, mergeId, mergeAssocId;
		var OtherModel = Model;
		var props = null;
		var opts = {};

		for (var i = 0; i &#x3c; arguments.length; i++) {
			switch (typeof arguments[i]) {
				case &#x22;string&#x22;:
					name = arguments[i];
					break;
				case &#x22;function&#x22;:
					OtherModel = arguments[i];
					break;
				case &#x22;object&#x22;:
					if (props === null) {
						props = arguments[i];
					} else {
						opts = arguments[i];
					}
					break;
			}
		}

		if (props === null) {
			props = {};
		} else {
			for (var k in props) {
				props[k] = Property.normalize({
					prop: props[k], name: k, customTypes: db.customTypes, settings: Model.settings
				});
			}
		}

		makeKey = opts.key || Settings.defaults().hasMany.key;

		mergeId = util.convertPropToJoinKeyProp(
			util.wrapFieldObject({
				field: opts.mergeId, model: Model, altName: Model.table
			}) ||
			util.formatField(Model, Model.table, true, opts.reversed),
			{ makeKey: makeKey, required: true }
		);

		mergeAssocId = util.convertPropToJoinKeyProp(
			util.wrapFieldObject({
				field: opts.mergeAssocId, model: OtherModel, altName: name
			}) ||
			util.formatField(OtherModel, name, true, opts.reversed),
			{ makeKey: makeKey, required: true }
		)

		var assocName = opts.name || ucfirst(name);
		var assocTemplateName = opts.accessor || assocName;
		var association = {
			name           : name,
			model          : OtherModel || Model,
			props          : props,
			hooks          : opts.hooks || {},
			autoFetch      : opts.autoFetch || false,
			autoFetchLimit : opts.autoFetchLimit || 2,
			// I&#x27;m not sure the next key is used..
			field          : util.wrapFieldObject({
				                 field: opts.field, model: OtherModel, altName: Model.table
				               }) ||
			                 util.formatField(Model, name, true, opts.reversed),
			mergeTable     : opts.mergeTable || (Model.table + &#x22;_&#x22; + name),
			mergeId        : mergeId,
			mergeAssocId   : mergeAssocId,
			getAccessor    : opts.getAccessor || (&#x22;get&#x22; + assocTemplateName),
			setAccessor    : opts.setAccessor || (&#x22;set&#x22; + assocTemplateName),
			hasAccessor    : opts.hasAccessor || (&#x22;has&#x22; + assocTemplateName),
			delAccessor    : opts.delAccessor || (&#x22;remove&#x22; + assocTemplateName),
			addAccessor    : opts.addAccessor || (&#x22;add&#x22; + assocTemplateName)
		};
		associations.push(association);

		if (opts.reverse) {
			OtherModel.hasMany(opts.reverse, Model, association.props, {
				reversed       : true,
				association    : opts.reverseAssociation,
				mergeTable     : association.mergeTable,
				mergeId        : association.mergeAssocId,
				mergeAssocId   : association.mergeId,
				field          : association.field,
				autoFetch      : association.autoFetch,
				autoFetchLimit : association.autoFetchLimit
			});
		}
		return this;
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	// setup hooks
	for (k in AvailableHooks) {
		model[AvailableHooks[k]] = createHookHelper(AvailableHooks[k]);
	}

	OneAssociation.<span class="apidocCodeKeywordSpan">prepare</span>(model, one_associations);
	ManyAssociation.prepare(opts.db, model, many_associations);
	ExtendAssociation.prepare(opts.db, model, extend_associations);

	return model;
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Model" id="apidoc.module.orm.Model">module orm.Model</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Model.Model" id="apidoc.element.orm.Model.Model">
        function <span class="apidocSignatureSpan">orm.</span>Model
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Model(opts) {
	opts = _.defaults(opts || {}, {
		keys: []
	});
	opts.keys = Array.isArray(opts.keys) ? opts.keys : [opts.keys];

	var one_associations       = [];
	var many_associations      = [];
	var extend_associations    = [];
	var association_properties = [];
	var model_fields           = [];
	var fieldToPropertyMap     = {};
	var allProperties          = {};
	var keyProperties          = [];

	var createHookHelper = function (hook) {
		return function (cb) {
			if (typeof cb !== &#x22;function&#x22;) {
				delete opts.hooks[hook];
			} else {
				opts.hooks[hook] = cb;
			}
			return this;
		};
	};
	var createInstance = function (data, inst_opts, cb) {
		if (!inst_opts) {
			inst_opts = {};
		}

		var found_assoc = false, i, k;

		for (k in data) {
			if (k === &#x22;extra_field&#x22;) continue;
			if (opts.properties.hasOwnProperty(k)) continue;
			if (inst_opts.extra &#x26;&#x26; inst_opts.extra.hasOwnProperty(k)) continue;
			if (opts.keys.indexOf(k) &#x3e;= 0) continue;
			if (association_properties.indexOf(k) &#x3e;= 0) continue;

			for (i = 0; i &#x3c; one_associations.length; i++) {
				if (one_associations[i].name === k) {
					found_assoc = true;
					break;
				}
			}
			if (!found_assoc) {
				for (i = 0; i &#x3c; many_associations.length; i++) {
					if (many_associations[i].name === k) {
						found_assoc = true;
						break;
					}
				}
			}
			if (!found_assoc) {
				delete data[k];
			}
		}

		var assoc_opts = {
			autoFetch      : inst_opts.autoFetch || false,
			autoFetchLimit : inst_opts.autoFetchLimit,
			cascadeRemove  : inst_opts.cascadeRemove
		};

		var setupAssociations = function (instance) {
			OneAssociation.extend(model, instance, opts.driver, one_associations, assoc_opts);
			ManyAssociation.extend(model, instance, opts.driver, many_associations, assoc_opts, createInstance);
			ExtendAssociation.extend(model, instance, opts.driver, extend_associations, assoc_opts);
		};

		var pending  = 2, create_err = null;
		var instance = new Instance(model, {
			uid                    : inst_opts.uid, // singleton unique id
			keys                   : opts.keys,
			is_new                 : inst_opts.is_new || false,
			isShell                : inst_opts.isShell || false,
			data                   : data,
			autoSave               : inst_opts.autoSave || false,
			extra                  : inst_opts.extra,
			extra_info             : inst_opts.extra_info,
			driver                 : opts.driver,
			table                  : opts.table,
			hooks                  : opts.hooks,
			methods                : opts.methods,
			validations            : opts.validations,
			one_associations       : one_associations,
			many_associations      : many_associations,
			extend_associations    : extend_associations,
			association_properties : association_properties,
			setupAssociations      : setupAssociations,
			fieldToPropertyMap     : fieldToPropertyMap,
			keyProperties          : keyProperties
		});
		instance.on(&#x22;ready&#x22;, function (err) {
			if (--pending &#x3e; 0) {
				create_err = err;
				return;
			}
			if (typeof cb === &#x22;function&#x22;) {
				return cb(err || create_err, instance);
			}
		});
		if (model_fields !== null) {
			LazyLoad.extend(instance, model, opts.properties);
		}

		OneAssociation.autoFetch(instance, one_associations, assoc_opts, function () {
			ManyAssociation.autoFetch(instance, many_associations, assoc_opts, function () {
				ExtendAssociation.autoFetch(instance, extend_associations, assoc_opts, function () {
					Hook.wait(instance, opts.hooks.afterAutoFetch, function (err) {
						if (--pending &#x3e; 0) {
							create_err = err;
							return;
						}
						if (typeof cb === &#x22;function&#x22;) {
							return cb(err || create_err, instance);
						}
					});
				});
			});
		});
		return instance;
	};

	var model = function () {
	    var instance, i;

	    var data = arguments.length &#x3e; 1 ? arguments : arguments[0];

	    if (Array.isArray(opts.keys) &#x26;&#x26; Array.isArray(data)) {
	        if (data.length == opts.keys.length) {
	            var data2 = {};
	            for (i = 0; i &#x3c; opts.keys.length; i++) {
	                data2[opts.keys[i ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.One" id="apidoc.module.orm.One">module orm.One</a></h1>


    <h2>
        <a href="#apidoc.element.orm.One.autoFetch" id="apidoc.element.orm.One.autoFetch">
        function <span class="apidocSignatureSpan">orm.One.</span>autoFetch
        <span class="apidocSignatureSpan">(Instance, associations, opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">autoFetch = function (Instance, associations, opts, cb) {
	if (associations.length === 0) {
		return cb();
	}

	var pending = associations.length;
	var autoFetchDone = function autoFetchDone() {
		pending -= 1;

		if (pending === 0) {
			return cb();
		}
	};

	for (var i = 0; i &#x3c; associations.length; i++) {
		autoFetchInstance(Instance, associations[i], opts, autoFetchDone);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return cb(err || create_err, instance);
			}
		});
		if (model_fields !== null) {
			LazyLoad.extend(instance, model, opts.properties);
		}

		OneAssociation.<span class="apidocCodeKeywordSpan">autoFetch</span>(instance, one_associations, assoc_opts, function () {
			ManyAssociation.autoFetch(instance, many_associations, assoc_opts, function () {
				ExtendAssociation.autoFetch(instance, extend_associations, assoc_opts, function () {
					Hook.wait(instance, opts.hooks.afterAutoFetch, function (err) {
						if (--pending &#x3e; 0) {
							create_err = err;
							return;
						}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.One.extend" id="apidoc.element.orm.One.extend">
        function <span class="apidocSignatureSpan">orm.One.</span>extend
        <span class="apidocSignatureSpan">(Model, Instance, Driver, associations)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (Model, Instance, Driver, associations) {
	for (var i = 0; i &#x3c; associations.length; i++) {
		extendInstance(Model, Instance, Driver, associations[i]);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			opts.conditions = opts.conditions || {};

			if (typeof _.last(args) === &#x22;function&#x22;) {
			    cb = args.pop();
			}

			if (typeof args[0] === &#x22;object&#x22;) {
				_.<span class="apidocCodeKeywordSpan">extend</span>(opts.conditions, args[0]);
			} else if (typeof args[0] === &#x22;string&#x22;) {
				opts.conditions.__sql = opts.conditions.__sql || [];
				opts.conditions.__sql.push(args);
			}

			if (cb) {
				chainRun(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.One.prepare" id="apidoc.element.orm.One.prepare">
        function <span class="apidocSignatureSpan">orm.One.</span>prepare
        <span class="apidocSignatureSpan">(Model, associations)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepare = function (Model, associations) {
	Model.hasOne = function () {
		var assocName;
		var assocTemplateName;
		var association = {
			name           : Model.table,
			model          : Model,
			reversed       : false,
			extension      : false,
			autoFetch      : false,
			autoFetchLimit : 2,
			required       : false
		};

		for (var i = 0; i &#x3c; arguments.length; i++) {
			switch (typeof arguments[i]) {
				case &#x22;string&#x22;:
					association.name = arguments[i];
					break;
				case &#x22;function&#x22;:
					if (arguments[i].table) {
						association.model = arguments[i];
					}
					break;
				case &#x22;object&#x22;:
					association = _.extend(association, arguments[i]);
					break;
			}
		}

		assocName = ucfirst(association.name);
		assocTemplateName = association.accessor || assocName;

		if (!association.hasOwnProperty(&#x22;field&#x22;)) {
			association.field = util.formatField(association.model, association.name, association.required, association.reversed);
		} else if(!association.extension) {
			association.field = util.wrapFieldObject({
				field: association.field, model: Model, altName: Model.table,
				mapsTo: association.mapsTo
			});
		}

		util.convertPropToJoinKeyProp(association.field, {
			makeKey: false, required: association.required
		});

		for (var k in Accessors) {
			if (!association.hasOwnProperty(k + &#x22;Accessor&#x22;)) {
				association[k + &#x22;Accessor&#x22;] = Accessors[k] + assocTemplateName;
			}
		}

		associations.push(association);
		for (k in association.field) {
			if (!association.field.hasOwnProperty(k)) {
				continue;
			}
			if (!association.reversed) {
				Model.addProperty(
					_.extend({}, association.field[k], { klass: &#x27;hasOne&#x27; }),
					false
				);
			}
		}

		if (association.reverse) {
			association.model.hasOne(association.reverse, Model, {
				reversed       : true,
				accessor       : association.reverseAccessor,
				reverseAccessor: undefined,
				field          : association.field,
				autoFetch      : association.autoFetch,
				autoFetchLimit : association.autoFetchLimit
			});
		}

		Model[&#x22;findBy&#x22; + assocTemplateName] = function () {
			var cb = null, conditions = null, options = {};

			for (var i = 0; i &#x3c; arguments.length; i++) {
				switch (typeof arguments[i]) {
					case &#x22;function&#x22;:
						cb = arguments[i];
						break;
					case &#x22;object&#x22;:
						if (conditions === null) {
							conditions = arguments[i];
						} else {
							options = arguments[i];
						}
						break;
				}
			}

			if (conditions === null) {
				throw new ORMError(&#x22;.findBy(&#x22; + assocName + &#x22;) is missing a conditions object&#x22;, &#x27;PARAM_MISMATCH&#x27;);
			}

			options.__merge = {
				from  : { table: association.model.table, field: (association.reversed ? Object.keys(association.field) : association.model.
id) },
				to    : { table: Model.table, field: (association.reversed ? association.model.id : Object.keys(association.field) ) },
				where : [ association.model.table, conditions ],
				table : Model.table
			};
			options.extra = [];

			if (typeof cb === &#x22;function&#x22;) {
				return Model.find({}, options, cb);
			}
			return Model.find({}, options);
		};

		return this;
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	// setup hooks
	for (k in AvailableHooks) {
		model[AvailableHooks[k]] = createHookHelper(AvailableHooks[k]);
	}

	OneAssociation.<span class="apidocCodeKeywordSpan">prepare</span>(model, one_associations);
	ManyAssociation.prepare(opts.db, model, many_associations);
	ExtendAssociation.prepare(opts.db, model, extend_associations);

	return model;
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Promise" id="apidoc.module.orm.Promise">module orm.Promise</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Promise.Promise" id="apidoc.element.orm.Promise.Promise">
        function <span class="apidocSignatureSpan">orm.</span>Promise
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Promise(opts) {
	opts = opts || {};

	var success_cb = opts.success || null;
	var fail_cb    = opts.fail    || null;

	return {
		handle: function (promise) {
			promise(function (err) {
				if (err) {
					if (fail_cb) fail_cb(err);
				} else {
					var args = Array.prototype.slice.call(arguments, 1);

					if (success_cb) success_cb.apply(null, args);
				}
			});
		},
		success: function (cb) {
			success_cb = cb;
			return this;
		},
		fail: function (cb) {
			fail_cb = cb;
			return this;
		}
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Property" id="apidoc.module.orm.Property">module orm.Property</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Property.normalize" id="apidoc.element.orm.Property.normalize">
        function <span class="apidocSignatureSpan">orm.Property.</span>normalize
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">normalize = function (opts) {
	if (typeof opts.prop === &#x22;function&#x22;) {
		switch (opts.prop.name) {
			case &#x22;String&#x22;:
				opts.prop = { type: &#x22;text&#x22; };
				break;
			case &#x22;Number&#x22;:
				opts.prop = { type: &#x22;number&#x22; };
				break;
			case &#x22;Boolean&#x22;:
				opts.prop = { type: &#x22;boolean&#x22; };
				break;
			case &#x22;Date&#x22;:
				opts.prop = { type: &#x22;date&#x22; };
				break;
			case &#x22;Object&#x22;:
				opts.prop = { type: &#x22;object&#x22; };
				break;
			case &#x22;Buffer&#x22;:
				opts.prop = { type: &#x22;binary&#x22; };
				break;
		}
	} else if (typeof opts.prop === &#x22;string&#x22;) {
		var tmp = opts.prop;
		opts.prop = {};
		opts.prop.type = tmp;
	} else if (Array.isArray(opts.prop)) {
		opts.prop = { type: &#x22;enum&#x22;, values: opts.prop };
	} else {
		opts.prop = _.cloneDeep(opts.prop);
	}

	if (KNOWN_TYPES.indexOf(opts.prop.type) === -1 &#x26;&#x26; !(opts.prop.type in opts.customTypes)) {
		throw new ORMError(&#x22;Unknown property type: &#x22; + opts.prop.type, &#x27;NO_SUPPORT&#x27;);
	}

	if (!opts.prop.hasOwnProperty(&#x22;required&#x22;) &#x26;&#x26; opts.settings.get(&#x22;properties.required&#x22;)) {
		opts.prop.required = true;
	}

	// Defaults to true. Setting to false hides properties from JSON.stringify(modelInstance).
	if (!opts.prop.hasOwnProperty(&#x22;enumerable&#x22;) || opts.prop.enumerable === true) {
		opts.prop.enumerable = true;
	}

	// Defaults to true. Rational means floating point here.
	if (opts.prop.type == &#x22;number&#x22; &#x26;&#x26; opts.prop.rational === undefined) {
		opts.prop.rational = true;
	}

	if (!(&#x27;mapsTo&#x27; in opts.prop)) {
		opts.prop.mapsTo = opts.name
	}

	if (opts.prop.type == &#x22;number&#x22; &#x26;&#x26; opts.prop.rational === false) {
		opts.prop.type = &#x22;integer&#x22;;
		delete opts.prop.rational;
	}

	opts.prop.name = opts.name;

	return opts.prop;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		}
	};

	var currFields = {};

	model.addProperty = function (propIn, options) {
		var cType;
		var prop = Property.<span class="apidocCodeKeywordSpan">normalize</span>({
			prop: propIn, name: (options &#x26;&#x26; options.name || propIn.name),
			customTypes: opts.db.customTypes, settings: opts.settings
		});

		// Maintains backwards compatibility
		if (opts.keys.indexOf(k) != -1) {
			prop.key = true;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.SQL" id="apidoc.module.orm.SQL">module orm.SQL</a></h1>


    <h2>
        <a href="#apidoc.element.orm.SQL.drop" id="apidoc.element.orm.SQL.drop">
        function <span class="apidocSignatureSpan">orm.SQL.</span>drop
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">drop = function (opts, cb) {
	var i, queries = [], pending;

	queries.push(&#x22;DROP TABLE IF EXISTS &#x22; + this.query.escapeId(opts.table));

	for (i = 0; i &#x3c; opts.many_associations.length; i++) {
		queries.push(&#x22;DROP TABLE IF EXISTS &#x22; + this.query.escapeId(opts.many_associations[i].mergeTable));
	}

	pending = queries.length;

	for (i = 0; i &#x3c; queries.length; i++) {
		this.execQuery(queries[i], function (err) {
			if (--pending === 0) {
				return cb(err);
			}
		});
	}

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Fixes passing json object instead of instances to Model.create() associations ([#216](../../issues/216))
- Passes Model to Instance directly, changes Instance to use Model.properties instead of opts.properties
- Exposes Model.properties
- Removes old Property.js throw error in favour of new one
- Adds initial Model.extendsTo(name, properties[, opts])
- Avoids redefining properties in instances
- Adds ErrorCodes.NOT_DEFINED
- Adds db.<span class="apidocCodeKeywordSpan">drop</span>() - similar to db.sync()
- Changes hasMany.getAccessor to support order as string (closes [#196](../../issues/196))
- Handle django string formatted sqlite datetime
- Many bug fixes

### v2.0.14 - 27 June 2013

- Changes many errors to use the ErrorCodes generator ([#206](../../issues/206))
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.SQL.sync" id="apidoc.element.orm.SQL.sync">
        function <span class="apidocSignatureSpan">orm.SQL.</span>sync
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sync = function (opts, cb) {
	var sync = new Sync({
		driver  : this,
		debug   : false//function (text) { console.log(text); }
	});

	var setIndex = function (p, v, k) {
		v.index = true;
		p[k] = v;
	};
	var props = {};

	if (this.customTypes) {
		for (var k in this.customTypes) {
			sync.defineType(k, this.customTypes[k]);
		}
	}

	sync.defineCollection(opts.table, opts.allProperties);

	for (var i = 0; i &#x3c; opts.many_associations.length; i++) {
		props = {};

		_.merge(props, opts.many_associations[i].mergeId);
		_.merge(props, opts.many_associations[i].mergeAssocId);
		props = _.transform(props, setIndex);
		_.merge(props, opts.many_associations[i].props);

		sync.defineCollection(opts.many_associations[i].mergeTable, props);
	}

	sync.sync(cb);

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Fixes passing json object instead of instances to Model.create() associations ([#216](../../issues/216))
- Passes Model to Instance directly, changes Instance to use Model.properties instead of opts.properties
- Exposes Model.properties
- Removes old Property.js throw error in favour of new one
- Adds initial Model.extendsTo(name, properties[, opts])
- Avoids redefining properties in instances
- Adds ErrorCodes.NOT_DEFINED
- Adds db.drop() - similar to db.<span class="apidocCodeKeywordSpan">sync</span>()
- Changes hasMany.getAccessor to support order as string (closes [#196](../../issues/196))
- Handle django string formatted sqlite datetime
- Many bug fixes

### v2.0.14 - 27 June 2013

- Changes many errors to use the ErrorCodes generator ([#206](../../issues/206))
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Settings" id="apidoc.module.orm.Settings">module orm.Settings</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Settings.Container" id="apidoc.element.orm.Settings.Container">
        function <span class="apidocSignatureSpan">orm.Settings.</span>Container
        <span class="apidocSignatureSpan">(settings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Settings(settings) {
	this.settings = settings;

	return {
		set: function (key, value) {
			set(key, value, settings);

			return this;
		},
		get: function (key, def) {
			var v = get(key, def, settings)

			if (v instanceof Function) {
				return v;
			} else {
				return _.cloneDeep(v);
			}
		},
		unset: function () {
			for (var i = 0; i &#x3c; arguments.length; i++) {
				if (typeof arguments[i] === &#x22;string&#x22;) {
					unset(arguments[i], settings);
				}
			}

			return this;
		}
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// specific to ORM, not in enforce for now
enforce.equalToProperty = exports.validators.equalToProperty;
enforce.unique          = exports.validators.unique;

exports.enforce    = enforce;

exports.singleton  = Singleton;
exports.settings   = new Settings.<span class="apidocCodeKeywordSpan">Container</span>(Settings.defaults());

exports.Property   = require(&#x22;./Property&#x22;);
exports.Settings   = Settings;
exports.ErrorCodes = ORMError.codes;

exports.Text = Query.Text;
for (var k in Query.Comparators) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Settings.defaults" id="apidoc.element.orm.Settings.defaults">
        function <span class="apidocSignatureSpan">orm.Settings.</span>defaults
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">defaults = function () {
	return default_settings;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	&#x22;afterLoad&#x22;,
	&#x22;afterAutoFetch&#x22;
];

exports.Model = Model;

function Model(opts) {
	opts = _.<span class="apidocCodeKeywordSpan">defaults</span>(opts || {}, {
		keys: []
	});
	opts.keys = Array.isArray(opts.keys) ? opts.keys : [opts.keys];

	var one_associations       = [];
	var many_associations      = [];
	var extend_associations    = [];
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.Utilities" id="apidoc.module.orm.Utilities">module orm.Utilities</a></h1>


    <h2>
        <a href="#apidoc.element.orm.Utilities.checkConditions" id="apidoc.element.orm.Utilities.checkConditions">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>checkConditions
        <span class="apidocSignatureSpan">(conditions, one_associations)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checkConditions = function (conditions, one_associations) {
	var k, i, j;

	// A)
	var associations = {};
	for (i = 0; i &#x3c; one_associations.length; i++) {
		associations[one_associations[i].name] = one_associations[i];
	}

	for (k in conditions) {
		// B)
		if (!associations.hasOwnProperty(k)) continue;

		// C)
		var values = conditions[k];
		if (!Array.isArray(values)) values = [values];

		// D)
		delete conditions[k];

		// E)
		var association_fields = Object.keys(associations[k].field);
		var model = associations[k].model;

		// F)
		for (i = 0; i &#x3c; values.length; i++) {
			if (values[i].isInstance &#x26;&#x26; values[i].model().uid === model.uid) {
				if (association_fields.length === 1) {
					if (typeof conditions[association_fields[0]] === &#x27;undefined&#x27;) {
						conditions[association_fields[0]] = values[i][model.id[0]];
					} else if(Array.isArray(conditions[association_fields[0]])) {
						conditions[association_fields[0]].push(values[i][model.id[0]]);
					} else {
						conditions[association_fields[0]] = [conditions[association_fields[0]], values[i][model.id[0]]];
					}
				} else {
					var _conds = {};
					for (j = 0; j &#x3c; association_fields.length; i++) {
						_conds[association_fields[j]] = values[i][model.id[j]];
					}

					conditions.or = conditions.or || [];
					conditions.or.push(_conds);
				}
			}
		}
	}

	return conditions;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			options.cascadeRemove = opts.cascadeRemove;
		}

		if (order) {
			order = Utilities.standardizeOrder(order);
		}
		if (conditions) {
			conditions = Utilities.<span class="apidocCodeKeywordSpan">checkConditions</span>(conditions, one_associations);
		}

		var chain = new ChainFind(model, {
			only         : options.only || model_fields,
			keys         : opts.keys,
			table        : opts.table,
			driver       : opts.driver,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.convertPropToJoinKeyProp" id="apidoc.element.orm.Utilities.convertPropToJoinKeyProp">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>convertPropToJoinKeyProp
        <span class="apidocSignatureSpan">(props, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">convertPropToJoinKeyProp = function (props, opts) {
	var prop;

	for (var k in props) {
		prop = props[k];

		prop.required = opts.required;

		if (prop.type == &#x27;serial&#x27;) {
			prop.type = &#x27;integer&#x27;;
		}
		if (opts.makeKey) {
			prop.key = true;
		} else {
			delete prop.key;
		}
	}

	return props;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					prop: props[k], name: k, customTypes: db.customTypes, settings: Model.settings
				});
			}
		}

		makeKey = opts.key || Settings.defaults().hasMany.key;

		mergeId = util.<span class="apidocCodeKeywordSpan">convertPropToJoinKeyProp</span>(
			util.wrapFieldObject({
				field: opts.mergeId, model: Model, altName: Model.table
			}) ||
			util.formatField(Model, Model.table, true, opts.reversed),
			{ makeKey: makeKey, required: true }
		);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.formatField" id="apidoc.element.orm.Utilities.formatField">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>formatField
        <span class="apidocSignatureSpan">(model, name, required, reversed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">formatField = function (model, name, required, reversed) {
	var fields = {}, field_opts, field_name;
	var keys = model.id;
	var assoc_key = model.settings.get(&#x22;properties.association_key&#x22;);

	for (var i = 0; i &#x3c; keys.length; i++) {
		if (reversed) {
			field_name = keys[i];
		} else if (typeof assoc_key === &#x22;function&#x22;) {
			field_name = assoc_key(name.toLowerCase(), keys[i]);
		} else {
			field_name = assoc_key.replace(&#x22;{name}&#x22;, name.toLowerCase())
			                      .replace(&#x22;{field}&#x22;, keys[i]);
		}

		if (model.properties.hasOwnProperty(keys[i])) {
			var p = model.properties[keys[i]];

			field_opts = {
				type     : p.type || &#x22;integer&#x22;,
				size     : p.size || 4,
				unsigned : p.unsigned || true,
				time     : p.time || false,
				big      : p.big || false,
				values   : p.values || null,
				required : required,
				name     : field_name,
				mapsTo   : field_name
			};
		} else {
			field_opts = {
				type     : &#x22;integer&#x22;,
				unsigned : true,
				size     : 4,
				required : required,
				name     : field_name,
				mapsTo   : field_name
			};
		}

		fields[field_name] = field_opts;
	}

	return fields;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			name           : name,
			table          : opts.table || (Model.table + &#x27;_&#x27; + name),
			reversed       : opts.reversed,
			autoFetch      : opts.autoFetch || false,
			autoFetchLimit : opts.autoFetchLimit || 2,
			field          : util.wrapFieldObject({
												 field: opts.field, model: Model, altName: Model.table
											 }) || util.<span class="apidocCodeKeywordSpan">formatField</span>(Model, Model.table, false, false),
			getAccessor    : opts.getAccessor || (&#x22;get&#x22; + assocName),
			setAccessor    : opts.setAccessor || (&#x22;set&#x22; + assocName),
			hasAccessor    : opts.hasAccessor || (&#x22;has&#x22; + assocName),
			delAccessor    : opts.delAccessor || (&#x22;remove&#x22; + assocName)
		};

		var newproperties = _.cloneDeep(properties);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.getConditions" id="apidoc.element.orm.Utilities.getConditions">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>getConditions
        <span class="apidocSignatureSpan">(model, fields, from)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConditions = function (model, fields, from) {
	var conditions = {};

	exports.populateConditions(model, fields, from, conditions);

	return conditions;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

				return cb(err, Assoc);
			};

			if (association.reversed) {
				if (util.hasValues(Instance, Model.id)) {
					if (typeof cb !== &#x22;function&#x22;) {
						return association.model.find(util.<span class="apidocCodeKeywordSpan">getConditions</span>(Model, Object.keys(association
.field), Instance), opts);
					}
					association.model.find(util.getConditions(Model, Object.keys(association.field), Instance), opts, saveAndReturn);
				} else {
					cb(null);
				}
			} else {
				if (Instance.isShell()) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.getRealPath" id="apidoc.element.orm.Utilities.getRealPath">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>getRealPath
        <span class="apidocSignatureSpan">(path_str, stack_index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRealPath = function (path_str, stack_index) {
	var path = require(&#x22;path&#x22;); // for now, load here (only when needed)
	var cwd = process.cwd();
	var err = new Error();
	var tmp = err.stack.split(/\r?\n/)[typeof stack_index !== &#x22;undefined&#x22; ? stack_index : 3], m;

	if ((m = tmp.match(/^\s*at\s+(.+):\d+:\d+$/)) !== null) {
		cwd = path.dirname(m[1]);
	} else if ((m = tmp.match(/^\s*at\s+module\.exports\s+\((.+?)\)/)) !== null) {
		cwd = path.dirname(m[1]);
	} else if ((m = tmp.match(/^\s*at\s+.+\s+\((.+):\d+:\d+\)$/)) !== null) {
		cwd = path.dirname(m[1]);
	}
	var pathIsAbsolute = path.isAbsolute || require(&#x27;path-is-absolute&#x27;);
	if (!pathIsAbsolute(path_str)) {
		path_str = path.join(cwd, path_str);
	}
	if (path_str.substr(-1) === path.sep) {
		path_str += &#x22;index&#x22;;
	}

	return path_str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

util.inherits(ORM, events.EventEmitter);

ORM.prototype.use = function (plugin_const, opts) {
	if (typeof plugin_const === &#x22;string&#x22;) {
		try {
			plugin_const = require(Utilities.<span class="apidocCodeKeywordSpan">getRealPath</span>(plugin_const));
		} catch (e) {
			throw e;
		}
	}

	var plugin = new plugin_const(this, opts || {});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.hasValues" id="apidoc.element.orm.Utilities.hasValues">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>hasValues
        <span class="apidocSignatureSpan">(obj, keys)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasValues = function (obj, keys) {
	for (var i = 0; i &#x3c; keys.length; i++) {
		if (!obj[keys[i]] &#x26;&#x26; obj[keys[i]] !== 0) return false;  // 0 is also a good value...
	}
	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	Object.defineProperty(Instance, association.hasAccessor, {
		value: function (opts, cb) {
			if (typeof opts === &#x22;function&#x22;) {
				cb = opts;
				opts = {};
			}

			if (util.<span class="apidocCodeKeywordSpan">hasValues</span>(Instance, Object.keys(association.field))) {
				association.model.get(util.values(Instance, Object.keys(association.field)), opts, function (err, instance) {
					return cb(err, instance ? true : false);
				});
			} else {
				cb(null, false);
			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.populateConditions" id="apidoc.element.orm.Utilities.populateConditions">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>populateConditions
        <span class="apidocSignatureSpan">(model, fields, source, target, overwrite)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">populateConditions = function (model, fields, source, target, overwrite) {
	for (var i = 0; i &#x3c; model.id.length; i++) {
		if (typeof target[fields[i]] === &#x27;undefined&#x27; || overwrite !== false) {
			target[fields[i]] = source[model.id[i]];
		} else if (Array.isArray(target[fields[i]])) {
			target[fields[i]].push(source[model.id[i]]);
		} else {
			target[fields[i]] = [target[fields[i]], source[model.id[i]]];
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		}
	}
};

exports.getConditions = function (model, fields, from) {
	var conditions = {};

	exports.<span class="apidocCodeKeywordSpan">populateConditions</span>(model, fields, from, conditions);

	return conditions;
};

exports.wrapFieldObject = function (params) {
	if (!params.field) {
		var assoc_key = params.model.settings.get(&#x22;properties.association_key&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.renameDatastoreFieldsToPropertyNames" id="apidoc.element.orm.Utilities.renameDatastoreFieldsToPropertyNames">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>renameDatastoreFieldsToPropertyNames
        <span class="apidocSignatureSpan">(data, fieldToPropertyMap)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renameDatastoreFieldsToPropertyNames = function (data, fieldToPropertyMap) {
	var k, prop;

	for (k in data) {
		prop = fieldToPropertyMap[k];
		if (prop &#x26;&#x26; prop.name != k) {
			data[prop.name] = data[k];
			delete data[k];
		}
	}
	return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			if (err) {
				return cb(new ORMError(err.message, &#x27;QUERY_ERROR&#x27;, { originalCode: err.code }));
			}
			if (data.length === 0) {
				return cb(new ORMError(&#x22;Not found&#x22;, &#x27;NOT_FOUND&#x27;, { model: opts.table }));
			}

			Utilities.<span class="apidocCodeKeywordSpan">renameDatastoreFieldsToPropertyNames</span>(data[0], fieldToPropertyMap);

			var uid = opts.driver.uid + &#x22;/&#x22; + opts.table + &#x22;/&#x22; + ids.join(&#x22;/&#x22;);

			Singleton.get(uid, {
				identityCache : (options.hasOwnProperty(&#x22;identityCache&#x22;) ? options.identityCache : opts.identityCache),
				saveCheck     : opts.settings.get(&#x22;instance.identityCacheSaveCheck&#x22;)
			}, function (cb) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.standardizeOrder" id="apidoc.element.orm.Utilities.standardizeOrder">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>standardizeOrder
        <span class="apidocSignatureSpan">(order)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">standardizeOrder = function (order) {
	if (typeof order === &#x22;string&#x22;) {
		if (order[0] === &#x22;-&#x22;) {
			return [ [ order.substr(1), &#x22;Z&#x22; ] ];
		}
		return [ [ order, &#x22;A&#x22; ] ];
	}

	var new_order = [], minus;

	for (var i = 0; i &#x3c; order.length; i++) {
		minus = (order[i][0] === &#x22;-&#x22;);

		if (i &#x3c; order.length - 1 &#x26;&#x26; [ &#x22;A&#x22;, &#x22;Z&#x22; ].indexOf(order[i + 1].toUpperCase()) &#x3e;= 0) {
			new_order.push([
				(minus ? order[i].substr(1) : order[i]),
				order[i + 1]
			]);
			i += 1;
		} else if (minus) {
			new_order.push([ order[i].substr(1), &#x22;Z&#x22; ]);
		} else {
			new_order.push([ order[i], &#x22;A&#x22; ]);
		}
	}

	return new_order;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				opts.limit = [ offset, limit ];
			} else {
				opts.limit = [ 0, offset ]; // offset = limit
			}
			return this;
		},
		order: function () {
			opts.order = Utilities.<span class="apidocCodeKeywordSpan">standardizeOrder</span>(Array.prototype.slice.apply(arguments));
			return this;
		},
		select: function () {
			if (arguments.length === 0) {
				throw new ORMError(&#x27;PARAM_MISMATCH&#x27;, &#x22;When using append you must at least define one property&#x22;);
			}
			if (Array.isArray(arguments[0])) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.transformOrderPropertyNames" id="apidoc.element.orm.Utilities.transformOrderPropertyNames">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>transformOrderPropertyNames
        <span class="apidocSignatureSpan">(order, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transformOrderPropertyNames = function (order, properties) {
	if (!order) return order;

	var i, item;
	var newOrder = JSON.parse(JSON.stringify(order));

	// Rename order properties according to mapsTo
	for (var i = 0; i &#x3c; newOrder.length; i++) {
		item = newOrder[i];

		// orderRaw
		if (Array.isArray(item[1])) continue;

		if (Array.isArray(item[0])) {
			// order on a hasMany
			// [ [&#x27;modelName&#x27;, &#x27;propName&#x27;], &#x27;Z&#x27;]
			item[0][1] = properties[item[0][1]].mapsTo;
		} else {
			// normal order
			item[0] = properties[item[0]].mapsTo;
		}
	}
	return newOrder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var prepareConditions = function () {
		return Utilities.transformPropertyNames(
			opts.conditions, opts.properties
		);
	};

	var prepareOrder = function () {
		return Utilities.<span class="apidocCodeKeywordSpan">transformOrderPropertyNames</span>(
			opts.order, opts.properties
		);
	};

	var chainRun = function (done) {
		var order, conditions;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.transformPropertyNames" id="apidoc.element.orm.Utilities.transformPropertyNames">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>transformPropertyNames
        <span class="apidocSignatureSpan">(dataIn, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transformPropertyNames = function (dataIn, properties) {
	var k, prop;
	var dataOut = {};

	for (k in dataIn) {
		prop = properties[k];
		if (prop) {
			dataOut[prop.mapsTo] = dataIn[k];
		} else {
			dataOut[k] = dataIn[k];
		}
	}
	return dataOut;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ChainInstance = require(&#x22;./ChainInstance&#x22;);
var Promise       = require(&#x22;./Promise&#x22;).Promise;

module.exports = ChainFind;

function ChainFind(Model, opts) {
	var prepareConditions = function () {
		return Utilities.<span class="apidocCodeKeywordSpan">transformPropertyNames</span>(
			opts.conditions, opts.properties
		);
	};

	var prepareOrder = function () {
		return Utilities.transformOrderPropertyNames(
			opts.order, opts.properties
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.values" id="apidoc.element.orm.Utilities.values">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>values
        <span class="apidocSignatureSpan">(obj, keys)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">values = function (obj, keys) {
	var i, k, vals = [];

	if (keys) {
		for (i = 0; i &#x3c; keys.length; i++) {
			vals.push(obj[keys[i]]);
		}
	} else if (Array.isArray(obj)) {
		for (i = 0; i &#x3c; obj.length; i++) {
			vals.push(obj[i]);
		}
	} else {
		for (k in obj) {
			if (!/[0-9]+/.test(k)) {
				vals.push(obj[k]);
			}
		}
	}
	return vals;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function extendInstance(Model, Instance, Driver, association, opts) {
	Object.defineProperty(Instance, association.hasAccessor, {
		value : function (cb) {
			if (!Instance[Model.id]) {
			    cb(new ORMError(&#x22;Instance not saved, cannot get extension&#x22;, &#x27;NOT_DEFINED&#x27;, { model: Model.table }));
			} else {
				association.model.get(util.<span class="apidocCodeKeywordSpan">values</span>(Instance, Model.id), function (err, extension) {
					return cb(err, !err &#x26;&#x26; extension ? true : false);
				});
			}
			return this;
		},
		enumerable : false
	});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.Utilities.wrapFieldObject" id="apidoc.element.orm.Utilities.wrapFieldObject">
        function <span class="apidocSignatureSpan">orm.Utilities.</span>wrapFieldObject
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wrapFieldObject = function (params) {
	if (!params.field) {
		var assoc_key = params.model.settings.get(&#x22;properties.association_key&#x22;);

		if (typeof assoc_key === &#x22;function&#x22;) {
		    params.field = assoc_key(params.altName.toLowerCase(), params.model.id[0]);
		} else {
			params.field = assoc_key.replace(&#x22;{name}&#x22;, params.altName.toLowerCase())
			               .replace(&#x22;{field}&#x22;, params.model.id[0]);
		}
	}

	if (typeof params.field == &#x27;object&#x27;) {
		for (var k in params.field) {
			if (!/[0-9]+/.test(k) &#x26;&#x26; params.field.hasOwnProperty(k)) {
				return params.field;
			}
		}
	}

	var newObj = {}, newProp, propPreDefined, propFromKey;

	propPreDefined = params.model.properties[params.field];
	propFromKey    = params.model.properties[params.model.id[0]];
	newProp        = { type: &#x27;integer&#x27; };

	var prop = _.cloneDeep(propPreDefined || propFromKey || newProp);

	if (!propPreDefined) {
		_.extend(prop, {
			name: params.field, mapsTo: params.mapsTo || params.field
		});
	}

	newObj[params.field] = prop;

	return newObj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var assocName = opts.name || ucfirst(name);
		var association = {
			name           : name,
			table          : opts.table || (Model.table + &#x27;_&#x27; + name),
			reversed       : opts.reversed,
			autoFetch      : opts.autoFetch || false,
			autoFetchLimit : opts.autoFetchLimit || 2,
			field          : util.<span class="apidocCodeKeywordSpan">wrapFieldObject</span>({
												 field: opts.field, model: Model, altName: Model.table
											 }) || util.formatField(Model, Model.table, false, false),
			getAccessor    : opts.getAccessor || (&#x22;get&#x22; + assocName),
			setAccessor    : opts.setAccessor || (&#x22;set&#x22; + assocName),
			hasAccessor    : opts.hasAccessor || (&#x22;has&#x22; + assocName),
			delAccessor    : opts.delAccessor || (&#x22;remove&#x22; + assocName)
		};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm._shared" id="apidoc.module.orm._shared">module orm._shared</a></h1>


    <h2>
        <a href="#apidoc.element.orm._shared.eagerQuery" id="apidoc.element.orm._shared.eagerQuery">
        function <span class="apidocSignatureSpan">orm._shared.</span>eagerQuery
        <span class="apidocSignatureSpan">(association, opts, keys, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eagerQuery = function (association, opts, keys, cb) {
		var desiredKey = Object.keys(association.field);
		var assocKey = Object.keys(association.mergeAssocId);

		var where = {};
		where[desiredKey] = keys;

		var query = this.query.select()
			.from(association.model.table)
			.select(opts.only)
			.from(association.mergeTable, assocKey, opts.keys)
			.select(desiredKey).as(&#x22;$p&#x22;)
			.where(association.mergeTable, where)
			.build();

		this.execSimpleQuery(query, cb);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					idMap[key] = index;

					return key;
				});

				async.eachSeries(opts.__eager,
					function (association, cb) {
						opts.driver.<span class="apidocCodeKeywordSpan">eagerQuery</span>(association, opts, keys, function (err, instances) {
							if (err) return cb(err)

							for (var i = 0, instance; instance = instances[i]; i++) {
								// Perform a parent lookup with $p, and initialize it as an instance.
								items[idMap[instance.$p]][association.name].push(association.model(instance));
							}
							cb();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm._shared.execQuery" id="apidoc.element.orm._shared.execQuery">
        function <span class="apidocSignatureSpan">orm._shared.</span>execQuery
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execQuery = function () {
		if (arguments.length == 2) {
			var query = arguments[0];
			var cb    = arguments[1];
		} else if (arguments.length == 3) {
			var query = this.query.escape(arguments[0], arguments[1]);
			var cb    = arguments[2];
		}
		return this.execSimpleQuery(query, cb);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{ col1: orm.not_like(12 + &#x22;%&#x22;) } // `col1` NOT LIKE &#x27;12%&#x27;
{ col1: orm.not_in([1, 4, 8]) } // `col1` NOT IN (1, 4, 8)
```

#### Raw queries

```js
db.driver.<span class="apidocCodeKeywordSpan">execQuery</span>(&#x22;SELECT id, email FROM user&#x22;, function (err, data) { ... })

// You can escape identifiers and values.
// For identifier substitution use: ??
// For value substitution use: ?
db.driver.execQuery(
&#x22;SELECT user.??, user.?? FROM user WHERE user.?? LIKE ? AND user.?? &#x3e; ?&#x22;,
[&#x27;id&#x27;, &#x27;name&#x27;, &#x27;name&#x27;, &#x27;john&#x27;, &#x27;id&#x27;, 55],
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce" id="apidoc.module.orm.enforce">module orm.enforce</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce" id="apidoc.element.orm.enforce.Enforce">
        function <span class="apidocSignatureSpan">orm.enforce.</span>Enforce
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Enforce(options) {
    this.validations = {};
    this.contexts = {};
    this.options = {
        returnAllErrors: options &#x26;&#x26; !!options.returnAllErrors
    };

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		Hook.wait(instance, opts.hooks.beforeValidation, function (err) {
		    var k, i;
			if (err) {
				return saveError(cb, err);
			}

			var checks = new enforce.<span class="apidocCodeKeywordSpan">Enforce</span>({
				returnAllErrors : Model.settings.get(&#x22;instance.returnAllErrors&#x22;)
			});

			for (k in opts.validations) {
				required = false;

				if (Model.allProperties[k]) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Validator" id="apidoc.element.orm.enforce.Validator">
        function <span class="apidocSignatureSpan">orm.enforce.</span>Validator
        <span class="apidocSignatureSpan">(validate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Validator(validate) {
    this.validator = validate;
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.equalToProperty" id="apidoc.element.orm.enforce.equalToProperty">
        function <span class="apidocSignatureSpan">orm.enforce.</span>equalToProperty
        <span class="apidocSignatureSpan">(name, msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equalToProperty = function (name, msg) {
	return function (v, next) {
		if (v === this[name]) {
			return next();
		}
		return next(msg || &#x27;not-equal-to-property&#x27;);
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.notEmptyString" id="apidoc.element.orm.enforce.notEmptyString">
        function <span class="apidocSignatureSpan">orm.enforce.</span>notEmptyString
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notEmptyString(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;empty-string&#x27;; }

    return Ranges.length(1, undefined, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.required" id="apidoc.element.orm.enforce.required">
        function <span class="apidocSignatureSpan">orm.enforce.</span>required
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function required(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;required&#x27;; }

    return new Validator(function (value, next) {
        if (value === null || value === undefined) {
            return next(message);
        }

        return next();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				break;
		}

		allProperties[prop.name]        = prop;
		fieldToPropertyMap[prop.mapsTo] = prop;

		if (prop.required) {
			model.prependValidation(prop.name, Validators.<span class="apidocCodeKeywordSpan">required</span>());
		}

		if (prop.key &#x26;&#x26; prop.klass == &#x27;primary&#x27;) {
			keyProperties.push(prop);
		}

		if (prop.lazyload !== true &#x26;&#x26; !currFields[prop.name]) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.sameAs" id="apidoc.element.orm.enforce.sameAs">
        function <span class="apidocSignatureSpan">orm.enforce.</span>sameAs
        <span class="apidocSignatureSpan">(property, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sameAs(property, message) {
	if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-same-as&#x27;; }

	return new Validator(function (value, next) {
		if (value !== this[property]) {
			return next(message);
		}

		return next();
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.unique" id="apidoc.element.orm.enforce.unique">
        function <span class="apidocSignatureSpan">orm.enforce.</span>unique
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unique = function () {
	var arg, k;
	var msg = null, opts = {};

	for (k in arguments) {
		arg = arguments[k];
		if (typeof arg === &#x22;string&#x22;) {
			msg = arg;
		} else if (typeof arg === &#x22;object&#x22;) {
			opts = arg;
		}
	}

	return function (v, next, ctx) {
		var s, scopeProp;

		if (typeof v === &#x22;undefined&#x22; || v === null) {
			return next();
		}

		//Cannot process on database engines which don&#x27;t support SQL syntax
		if (!ctx.driver.isSql) {
			return next(&#x27;not-supported&#x27;);
		}

		var chain = ctx.model.find();

		var chainQuery = function (prop, value) {
			var query = null;

			if (opts.ignoreCase === true &#x26;&#x26; ctx.model.properties[prop] &#x26;&#x26; ctx.model.properties[prop].type === &#x27;text&#x27;) {
				query = util.format(&#x27;LOWER(%s.%s) LIKE LOWER(?)&#x27;,
					ctx.driver.query.escapeId(ctx.model.table), ctx.driver.query.escapeId(prop)
				);
				chain.where(query, [value]);
			} else {
				query = {};
				query[prop] = value;
				chain.where(query);
			}
		};

		var handler = function (err, records) {
			if (err) {
				return next();
			}
			if (!records || records.length === 0) {
				return next();
			}
			if (records.length === 1 &#x26;&#x26; records[0][ctx.model.id] === this[ctx.model.id]) {
				return next();
			}
			return next(msg || &#x27;not-unique&#x27;);
		}.bind(this);

		chainQuery(ctx.property, v);

		if (opts.scope) {
			for (s in opts.scope) {
				scopeProp = opts.scope[s];

				// In SQL unique index land, NULL values are not considered equal.
				if (typeof ctx.instance[scopeProp] == &#x27;undefined&#x27; || ctx.instance[scopeProp] === null) {
					return next();
				}

				chainQuery(scopeProp, ctx.instance[scopeProp]);
			}
		}

		chain.all(handler);
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.Enforce" id="apidoc.module.orm.enforce.Enforce">module orm.enforce.Enforce</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce.Enforce" id="apidoc.element.orm.enforce.Enforce.Enforce">
        function <span class="apidocSignatureSpan">orm.enforce.</span>Enforce
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Enforce(options) {
    this.validations = {};
    this.contexts = {};
    this.options = {
        returnAllErrors: options &#x26;&#x26; !!options.returnAllErrors
    };

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		Hook.wait(instance, opts.hooks.beforeValidation, function (err) {
		    var k, i;
			if (err) {
				return saveError(cb, err);
			}

			var checks = new enforce.<span class="apidocCodeKeywordSpan">Enforce</span>({
				returnAllErrors : Model.settings.get(&#x22;instance.returnAllErrors&#x22;)
			});

			for (k in opts.validations) {
				required = false;

				if (Model.allProperties[k]) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.Enforce.prototype" id="apidoc.module.orm.enforce.Enforce.prototype">module orm.enforce.Enforce.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce.prototype.add" id="apidoc.element.orm.enforce.Enforce.prototype.add">
        function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>add
        <span class="apidocSignatureSpan">(property, validator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (property, validator) {
    if (typeof validator === &#x27;function&#x27; &#x26;&#x26; validator.length &#x3e;= 2) {
        validator = new Validator(validator);
    }

    if (validator.validate === undefined) {
        throw new Error(&#x27;Missing validator (function) in Enforce.add(property, validator)&#x27;);
    }

    if (!this.validations.hasOwnProperty(property))
        this.validations[property] = [];

    this.validations[property].push(validator);
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						}
					}
				}
				if (!alwaysValidate &#x26;&#x26; !required &#x26;&#x26; instance[k] == null) {
					continue; // avoid validating if property is not required and is &#x22;empty&#x22;
				}
				for (i = 0; i &#x3c; opts.validations[k].length; i++) {
					checks.<span class="apidocCodeKeywordSpan">add</span>(k, opts.validations[k][i]);
				}
			}

			checks.context(&#x22;instance&#x22;, instance);
			checks.context(&#x22;model&#x22;, Model);
			checks.context(&#x22;driver&#x22;, opts.driver);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce.prototype.check" id="apidoc.element.orm.enforce.Enforce.prototype.check">
        function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>check
        <span class="apidocSignatureSpan">(data, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">check = function (data, cb) {
    var _this = this;
    var validations = [];

    var errors = [];
    var next = function () {
        if (validations.length === 0) {
            if (errors.length &#x3e; 0)
                return cb(errors);
else
                return cb(null);
        }

        var validation = validations.shift();
        _this.contexts.property = validation.property;

        validation.validator.validate(data[validation.property], function (message) {
            if (message) {
                var err = new Error(message);
                err.property = validation.property;
                err.value = data[validation.property];
                err.msg = message;
                err.type = &#x22;validation&#x22;;

                if (!this.options.returnAllErrors)
                    return cb(err);
                errors.push(err);
            }

            return next();
        }.bind(_this), data, _this.contexts);
    };

    for (var k in this.validations) {
        for (var i = 0; i &#x3c; this.validations[k].length; i++) {
            validations.push({
                property: k,
                validator: this.validations[k][i]
            });
        }
    }

    return next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				}
			}

			checks.context(&#x22;instance&#x22;, instance);
			checks.context(&#x22;model&#x22;, Model);
			checks.context(&#x22;driver&#x22;, opts.driver);

			return checks.<span class="apidocCodeKeywordSpan">check</span>(instance, cb);
		});
	};
	var saveError = function (cb, err) {
		instance_saving = false;

		emitEvent(&#x22;save&#x22;, err, instance);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce.prototype.clear" id="apidoc.element.orm.enforce.Enforce.prototype.clear">
        function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function () {
    this.validations = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Adds model.namePrefix setting ([#203](../../issues/203))
- Fixes bug when passing an array (object) of ids but no options object
- Only mark model as dirty if a property has _really_ changed
- Fix hasOne infinite loop
- WIP: Fix hasOne infinite loop &#x26; migrate tests to mocha
- Fixes ipv4 predefined validator match string (it was not matching correctly!)
- Fixes Model.get() when passing cache: false and model has cache: true
- Creates Singleton.<span class="apidocCodeKeywordSpan">clear</span>() to clear cache, exports singleton in orm
- Fix required property model.save only threw a single error with returnAllErrors = true
- Fixes some hasMany association usage of Association.id to check for real id property name ([#197](../../issues/197))
- Changes db.load() to return value from loaded and invoked function ([#194](../../issues/194))
- Adds possibility to add a callback to ChainFind.find() ([#190](../../issues/190))
- Adds .findByX(...) to .hasOne(&#x22;X&#x22;, ...)
- Allow db.load() to work outside of module.exports
- Fix mysql driver for non-autoincrement key
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Enforce.prototype.context" id="apidoc.element.orm.enforce.Enforce.prototype.context">
        function <span class="apidocSignatureSpan">orm.enforce.Enforce.prototype.</span>context
        <span class="apidocSignatureSpan">(name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">context = function (name, value) {
    if (name &#x26;&#x26; value) {
        this.contexts[name] = value;
        return this;
    } else if (name)
        return this.contexts[name];
else
        return this.contexts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					continue; // avoid validating if property is not required and is &#x22;empty&#x22;
				}
				for (i = 0; i &#x3c; opts.validations[k].length; i++) {
					checks.add(k, opts.validations[k][i]);
				}
			}

			checks.<span class="apidocCodeKeywordSpan">context</span>(&#x22;instance&#x22;, instance);
			checks.context(&#x22;model&#x22;, Model);
			checks.context(&#x22;driver&#x22;, opts.driver);

			return checks.check(instance, cb);
		});
	};
	var saveError = function (cb, err) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.Validator" id="apidoc.module.orm.enforce.Validator">module orm.enforce.Validator</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.Validator.Validator" id="apidoc.element.orm.enforce.Validator.Validator">
        function <span class="apidocSignatureSpan">orm.enforce.</span>Validator
        <span class="apidocSignatureSpan">(validate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Validator(validate) {
    this.validator = validate;
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.Validator.prototype" id="apidoc.module.orm.enforce.Validator.prototype">module orm.enforce.Validator.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.Validator.prototype.ifDefined" id="apidoc.element.orm.enforce.Validator.prototype.ifDefined">
        function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifDefined
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ifDefined = function () {
    var _this = this;
    return new Validator(function (value, next, contexts) {
        if (value === undefined || value === null)
            return next();
        return _this.validator(value, next, contexts);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Validator.prototype.ifNotEmptyString" id="apidoc.element.orm.enforce.Validator.prototype.ifNotEmptyString">
        function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifNotEmptyString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ifNotEmptyString = function () {
    var _this = this;
    return new Validator(function (value, next, contexts) {
        if (value === undefined || value === null)
            return next();
        if (typeof value !== &#x27;string&#x27;)
            return next();
        if (value.length === 0)
            return next();
        return _this.validator(value, next, contexts);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Validator.prototype.ifNotType" id="apidoc.element.orm.enforce.Validator.prototype.ifNotType">
        function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifNotType
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ifNotType = function (type) {
    var _this = this;
    return new Validator(function (value, next, contexts) {
        if (typeof value != type)
            return _this.validator(value, next, contexts);
        return next();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Validator.prototype.ifType" id="apidoc.element.orm.enforce.Validator.prototype.ifType">
        function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>ifType
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ifType = function (type) {
    var _this = this;
    return new Validator(function (value, next, contexts) {
        if (typeof value != type)
            return next();
        return _this.validator(value, next, contexts);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.Validator.prototype.validate" id="apidoc.element.orm.enforce.Validator.prototype.validate">
        function <span class="apidocSignatureSpan">orm.enforce.Validator.prototype.</span>validate
        <span class="apidocSignatureSpan">(data, next, thisArg, contexts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (data, next, thisArg, contexts) {
    if (typeof contexts === &#x22;undefined&#x22;) { contexts = {}; }
    this.validator.apply(thisArg, [data, next, contexts]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Adds .distinct() aggregate function to all drivers ([#123](../../issues/123))
- Changes model.find() queries to specify columns instead of selecting * from tables ([#106](../../issues/106))
- Changes hasMany.addAccessor to support arrays of instances ([#97](../../issues/97))
- Adds support for descending ordering using &#x22;-property&#x22; ([#115](../../issues/115))
- Adds pool support to postgres driver
- Removes postgres axomic driver
- Updates redshift driver to use new postgres driver
- Adds .<span class="apidocCodeKeywordSpan">validate</span>() model to instances
- Adds more tests
- Some documentation updates
- Some bug fixes

### v2.0.8 - 8 Apr 2013

- Adds more aggregate functions to the several drivers
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.lists" id="apidoc.module.orm.enforce.lists">module orm.enforce.lists</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.lists.inside" id="apidoc.element.orm.enforce.lists.inside">
        function <span class="apidocSignatureSpan">orm.enforce.lists.</span>inside
        <span class="apidocSignatureSpan">(list, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inside(list, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;outside-list&#x27;; }
    return new Validator(function (value, next) {
        if (list.indexOf(value) &#x3e;= 0)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.lists.outside" id="apidoc.element.orm.enforce.lists.outside">
        function <span class="apidocSignatureSpan">orm.enforce.lists.</span>outside
        <span class="apidocSignatureSpan">(list, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function outside(list, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;inside-list&#x27;; }
    return new Validator(function (value, next) {
        if (list.indexOf(value) === -1)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.patterns" id="apidoc.module.orm.enforce.patterns">module orm.enforce.patterns</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.email" id="apidoc.element.orm.enforce.patterns.email">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>email
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function email(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-email&#x27;; }
    return exports.match(&#x22;^[a-z0-9\\._%\\+\\-]+@[a-z0-9\\.\\-]+\\.[a-z]{2,63}$&#x22;, &#x22;i&#x22;, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.hexString" id="apidoc.element.orm.enforce.patterns.hexString">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>hexString
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hexString(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-hex-string&#x27;; }
    return exports.match(&#x22;^[a-f0-9]+$&#x22;, &#x22;i&#x22;, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.ipv4" id="apidoc.element.orm.enforce.patterns.ipv4">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>ipv4
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ipv4(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-ipv4&#x27;; }
    var p1 = &#x22;([1-9]|1[0-9][0-9]?|2[0-4][0-9]|25[0-4])&#x22;;
    var p2 = &#x22;([0-9]|1[0-9][0-9]?|2[0-4][0-9]|25[0-4])&#x22;;
    return exports.match(&#x22;^&#x22; + [p1, p2, p2, p1].join(&#x22;\\.&#x22;) + &#x22;$&#x22;, &#x22;&#x22;, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.ipv6" id="apidoc.element.orm.enforce.patterns.ipv6">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>ipv6
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ipv6(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-ipv6&#x27;; }

    var p1 = new RegExp(&#x22;^([a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$&#x22;, &#x22;i&#x22;);
    var p2 = new RegExp(&#x22;^([a-f0-9]{1,4}:)*[a-f0-9]{1,4}$&#x22;, &#x22;i&#x22;);

    return new Validator(function (value, next) {
        if (typeof value != &#x22;string&#x22;) {
            return next(message);
        }
        // unspecified / loopback
        if ([ &#x22;::&#x22;, &#x22;::1&#x22; ].indexOf(value) &#x3e;= 0) {
            return next();
        }
        // normal address (with possible leading zeroes omitted)
        if (value.match(p1)) {
            return next();
        }
        if (value.indexOf(&#x22;::&#x22;) == -1) {
            return next(message);
        }
        // grouping zeroes
        var g = value.split(&#x22;::&#x22;);

        if (g.length != 2) {
            return next(message);
        }
        if (!g[0].match(p2) || !g[1].match(p2)) {
            return next(message);
        }
        return next();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.mac" id="apidoc.element.orm.enforce.patterns.mac">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>mac
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function mac(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-mac&#x27;; }
    var p = &#x22;[0-9a-f]{1,2}&#x22;;
    var s = &#x22;[\\.:]&#x22;;
    return exports.match(&#x22;^&#x22; + [p,p,p,p,p,p].join(s) + &#x22;$&#x22;, &#x22;i&#x22;, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.match" id="apidoc.element.orm.enforce.patterns.match">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>match
        <span class="apidocSignatureSpan">(pattern, modifiers, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function match(pattern, modifiers, message) {
    if (typeof modifiers === &#x22;undefined&#x22;) { modifiers = &#x27;i&#x27;; }
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;no-pattern-match&#x27;; }
    if (arguments.length == 2) {
        message = modifiers;
        modifiers = &#x27;i&#x27;;
    }

    if (typeof pattern === &#x27;string&#x27;) {
        pattern = new RegExp(pattern, modifiers);
    }

    return new Validator(function (value, next) {
        if (typeof value === &#x27;string&#x27; &#x26;&#x26; value.match(pattern))
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

exports.getRealPath = function (path_str, stack_index) {
	var path = require(&#x22;path&#x22;); // for now, load here (only when needed)
	var cwd = process.cwd();
	var err = new Error();
	var tmp = err.stack.split(/\r?\n/)[typeof stack_index !== &#x22;undefined&#x22; ? stack_index : 3], m;

	if ((m = tmp.<span class="apidocCodeKeywordSpan">match</span>(/^\s*at\s+(.+):\d+:\d+$/)) !== null) {
		cwd = path.dirname(m[1]);
	} else if ((m = tmp.match(/^\s*at\s+module\.exports\s+\((.+?)\)/)) !== null) {
		cwd = path.dirname(m[1]);
	} else if ((m = tmp.match(/^\s*at\s+.+\s+\((.+):\d+:\d+\)$/)) !== null) {
		cwd = path.dirname(m[1]);
	}
	var pathIsAbsolute = path.isAbsolute || require(&#x27;path-is-absolute&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.uuid3" id="apidoc.element.orm.enforce.patterns.uuid3">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>uuid3
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function uuid3(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-uuid3&#x27;; }
    return exports.match(&#x22;^[a-f0-9]{8}\-[a-f0-9]{4}\-3[a-f0-9]{3}\-[89ab][a-f0-9]{3}\-[a-f0-9]{12}$&#x22;, &#x22;i&#x22;, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.patterns.uuid4" id="apidoc.element.orm.enforce.patterns.uuid4">
        function <span class="apidocSignatureSpan">orm.enforce.patterns.</span>uuid4
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function uuid4(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-uuid4&#x27;; }
    return exports.match(&#x22;^[a-f0-9]{8}\-[a-f0-9]{4}\-4[a-f0-9]{3}\-[89ab][a-f0-9]{3}\-[a-f0-9]{12}$&#x22;, &#x22;i&#x22;, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.ranges" id="apidoc.module.orm.enforce.ranges">module orm.enforce.ranges</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.ranges.length" id="apidoc.element.orm.enforce.ranges.length">
        function <span class="apidocSignatureSpan">orm.enforce.ranges.</span>length
        <span class="apidocSignatureSpan">(min, max, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function length(min, max, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;out-of-range-length&#x27;; }
    return new Validator(function (value, next) {
        if (value === undefined || value === null)
            return next(&#x27;undefined&#x27;);
        if (min === undefined &#x26;&#x26; value.length &#x3c;= max)
            return next();
        if (max === undefined &#x26;&#x26; value.length &#x3e;= min)
            return next();
        if (value.length &#x3e;= min &#x26;&#x26; value.length &#x3c;= max)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.ranges.number" id="apidoc.element.orm.enforce.ranges.number">
        function <span class="apidocSignatureSpan">orm.enforce.ranges.</span>number
        <span class="apidocSignatureSpan">(min, max, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function number(min, max, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;out-of-range-number&#x27;; }
    return new Validator(function (value, next) {
        if (value === undefined || value === null)
            return next(&#x27;undefined&#x27;);
        if (min === undefined &#x26;&#x26; value &#x3c;= max)
            return next();
        if (max === undefined &#x26;&#x26; value &#x3e;= min)
            return next();
        if (value &#x3e;= min &#x26;&#x26; value &#x3c;= max)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}, {
		methods: {
			fullName: function () {
				return this.name + &#x27; &#x27; + this.surname;
			}
		},
		validations: {
			age: orm.enforce.ranges.<span class="apidocCodeKeywordSpan">number</span>(18, undefined, &#x22;under-age&#x22;)
		}
	});

    // add the table to the database
	db.sync(function(err) {
		if (err) throw err;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.enforce.security" id="apidoc.module.orm.enforce.security">module orm.enforce.security</a></h1>


    <h2>
        <a href="#apidoc.element.orm.enforce.security.creditcard" id="apidoc.element.orm.enforce.security.creditcard">
        function <span class="apidocSignatureSpan">orm.enforce.security.</span>creditcard
        <span class="apidocSignatureSpan">(types, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function creditcard(types, message) {
    if (typeof types === &#x22;undefined&#x22;) { types = [&#x22;amex&#x22;, &#x22;visa&#x22;, &#x22;maestro&#x22;, &#x22;discover&#x22;, &#x22;mastercard&#x22;]; }
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;not-valid-creditcard&#x27;; }
    return new Validator(function (v, next) {
        if (!v)
            return next(message);

        v = &#x22;&#x22; + v;

        var ok = false;

        for (var i = 0; i &#x3c; types.length; i++) {
            switch (types[i]) {
                case &#x22;amex&#x22;:
                    if (v.length != 15)
                        break;

                    ok = (creditcard_prefixes[&#x22;amex&#x22;].indexOf(v.substr(0, 2)) &#x3e;= 0);
                    break;
                case &#x22;visa&#x22;:
                    if (v.length &#x3c; 13)
                        break;
                    if (v.length &#x3e; 16)
                        break;

                    ok = (v[0] == &#x22;4&#x22;);
                    break;
                case &#x22;maestro&#x22;:
                    if (v.length &#x3c; 16)
                        break;
                    if (v.length &#x3e; 19)
                        break;

                    ok = (creditcard_prefixes[&#x22;maestro&#x22;].indexOf(v.substr(0, 4)) &#x3e;= 0);
                    break;
                case &#x22;mastercard&#x22;:
                    if (v.length &#x3c; 16)
                        break;
                    if (v.length &#x3e; 19)
                        break;

                    ok = (creditcard_prefixes[&#x22;mastercard&#x22;].indexOf(v.substr(0, 2)) &#x3e;= 0);
                    break;
                case &#x22;discover&#x22;:
                    if (v.length != 16)
                        break;

                    ok = (creditcard_prefixes[&#x22;discover4&#x22;].indexOf(v.substr(0, 4)) &#x3e;= 0) || (creditcard_prefixes[&#x22;discover3&#x22;].indexOf
(v.substr(0, 3)) &#x3e;= 0) || (creditcard_prefixes[&#x22;discover2&#x22;].indexOf(v.substr(0, 2)) &#x3e;= 0);

                    if (!ok) {
                        var prefix = +v.substr(0, 6);

                        ok = (!isNaN(prefix) &#x26;&#x26; prefix &#x3e;= 622126 &#x26;&#x26; prefix &#x3c;= 622925);
                    }
                    break;
                case &#x22;luhn&#x22;:
                    // fallback
                    ok = true;
                    break;
            }
            if (ok)
                break;
        }

        if (!ok) {
            return next(message);
        }

        // it&#x27;s in one of possible types, let&#x27;s check Luhn
        var check = +v[v.length - 1];

        if (isNaN(check)) {
            return next(message);
        }

        var digits = v.slice(0, v.length - 1).split(&#x27;&#x27;);
        digits.reverse();

        for (var i = 0; i &#x3c; digits.length; i++) {
            digits[i] = +digits[i];
            if (isNaN(digits[i])) {
                return next(message);
            }

            if (i % 2 === 0) {
                digits[i] *= 2;
                if (digits[i] &#x3e; 9) {
                    digits[i] -= 9;
                }
            }
        }

        check += digits.reduce(function (a, b) {
            return a + b;
        });

        return next(check % 10 !== 0 ? message : null);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.security.password" id="apidoc.element.orm.enforce.security.password">
        function <span class="apidocSignatureSpan">orm.enforce.security.</span>password
        <span class="apidocSignatureSpan">(checks, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function password(checks, message) {
    if (!message) {
        message = checks;
        checks = &#x22;luns6&#x22;;
    }

    if (!message) {
        message = &#x22;weak-password&#x22;;
    }

    var m = checks.match(/([0-9]+)/);
    var min_len = (m ? parseInt(m[1], 10) : null);

    return new Validator(function (value, next) {
        if (!value)
            return next(message);

        if (checks.indexOf(&#x22;l&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[a-z]/))
            return next(message);
        if (checks.indexOf(&#x22;u&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[A-Z]/))
            return next(message);
        if (checks.indexOf(&#x22;n&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[0-9]/))
            return next(message);
        if (checks.indexOf(&#x22;s&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[^a-zA-Z0-9]/))
            return next(message);
        if (min_len !== null &#x26;&#x26; min_len &#x3e; value.length)
            return next(message);

        return next();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Better association typing and multikey support

### v2.0.15 - 10 July 2013

- Support for &#x27;point&#x27; type as a property ([#221](../../issues/221))
- .call() in aggregates for generic functions ([#204](../../issues/204))
- Adds hook afterAutoFetch triggered after extending and auto fetching (if any) associations ([#219](../../issues/219))
- Adds predefined validator .<span class="apidocCodeKeywordSpan">password</span>()
- Adds ability to have the afterLoad hook blocking ([#219](../../issues/219))
- Changes Model.create() to wait for createInstance callback instead of using the returned value
- Fixes problem with hasOne associations for none persisted instances and autoFetch active just blocking
- Refactored Model.hasOne() constructor to be able to mix parameters
- Fixes reversed hasOne association on the reversed model not being correctly saved ([#216](../../issues/216))
- Changes Model.hasMany.addAccessor to throw just like .setAccessor when no associations are passed
- Adds ability to pass an Array to hasMany.hasAccessor and also not passing any instance to hasAccessor and have it check for any
 associated item
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.enforce.security.username" id="apidoc.element.orm.enforce.security.username">
        function <span class="apidocSignatureSpan">orm.enforce.security.</span>username
        <span class="apidocSignatureSpan">(options, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function username(options, message) {
    if (typeof options === &#x22;undefined&#x22;) { options = { length: 2, expr: null }; }
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;invalid-username&#x27;; }
    if (typeof options === &#x27;string&#x27;) {
        message = options.toString();
        options = { length: 2, expr: null };
    }

    if (!options.expr) {
        options.expr = new RegExp(&#x22;^[a-z_][a-z0-9_\\-]{&#x22; + (options.length - 1) + &#x22;,}$&#x22;, &#x22;i&#x22;);
    }

    return patterns.match(options.expr, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.settings" id="apidoc.module.orm.settings">module orm.settings</a></h1>


    <h2>
        <a href="#apidoc.element.orm.settings.get" id="apidoc.element.orm.settings.get">
        function <span class="apidocSignatureSpan">orm.settings.</span>get
        <span class="apidocSignatureSpan">(key, def)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (key, def) {
			var v = get(key, def, settings)

			if (v instanceof Function) {
				return v;
			} else {
				return _.cloneDeep(v);
			}
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Add `enumerable` flag to exclude instance properties from enumeration ([#724](../../issues/724))

### v3.0.0
- Rename `cache` -&#x3e; `identityCache` and **disable by default** ([#350](../../issues/350), [#564](../../issues/564), [#626](../../
issues/626), [#672](../../issues/672), [#684](../../issues/684), [#694](../../issues/694), [#721](../../issues/721))

**This is a potentially breaking change:**
```js
User.<span class="apidocCodeKeywordSpan">get</span>(14, (err, userA) =&#x3e;
User.get(14, (err, userB) =&#x3e;
  // v2
  userA    == userB
  userA.id == userB.id
  // v3, identity cache is now disabled by default
  userA    != userB
  userA.id == userB.id
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.settings.set" id="apidoc.element.orm.settings.set">
        function <span class="apidocSignatureSpan">orm.settings.</span>set
        <span class="apidocSignatureSpan">(key, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (key, value) {
			set(key, value, settings);

			return this;
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Fix Model.create missing properties bug
- Add missing `var` ([#523](../../issues/523))
- Fix hasOne `required: true` when `instance.returnAllErrors` is true.
  This also makes hasOne required validations messages consistent with other validation messages.

### v2.1.15 - 05 Jun 2014
- Feature: Enable plugging in custom third-party drivers (now known as adapters) ([#512](../../issues/512))
- Add Instance.<span class="apidocCodeKeywordSpan">set</span>() so that properties of type object can have their properties set
and mark model as dirty ([#517](../../issues/517))
- Add Instance.markAsDirty(propName) to force a properties state to dirty/changed.
- Enable Property.mapsTo for keys ([#509](../../issues/509))
- Fix hasMany join tables with custom key columns ([#510](../../issues/510))

### v2.1.14 - 22 May 2014
- Allow explicitly specifying `key: true` on properties rather than passing in an array of ids.
- Fix Property.mapsTo ([#506](../../issues/506))
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.settings.unset" id="apidoc.element.orm.settings.unset">
        function <span class="apidocSignatureSpan">orm.settings.</span>unset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unset = function () {
			for (var i = 0; i &#x3c; arguments.length; i++) {
				if (typeof arguments[i] === &#x22;string&#x22;) {
					unset(arguments[i], settings);
				}
			}

			return this;
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.singleton" id="apidoc.module.orm.singleton">module orm.singleton</a></h1>


    <h2>
        <a href="#apidoc.element.orm.singleton.clear" id="apidoc.element.orm.singleton.clear">
        function <span class="apidocSignatureSpan">orm.singleton.</span>clear
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function (key) {
	if (typeof key === &#x22;string&#x22;) {
		delete map[key];
	} else {
		map = {};
	}
	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Adds model.namePrefix setting ([#203](../../issues/203))
- Fixes bug when passing an array (object) of ids but no options object
- Only mark model as dirty if a property has _really_ changed
- Fix hasOne infinite loop
- WIP: Fix hasOne infinite loop &#x26; migrate tests to mocha
- Fixes ipv4 predefined validator match string (it was not matching correctly!)
- Fixes Model.get() when passing cache: false and model has cache: true
- Creates Singleton.<span class="apidocCodeKeywordSpan">clear</span>() to clear cache, exports singleton in orm
- Fix required property model.save only threw a single error with returnAllErrors = true
- Fixes some hasMany association usage of Association.id to check for real id property name ([#197](../../issues/197))
- Changes db.load() to return value from loaded and invoked function ([#194](../../issues/194))
- Adds possibility to add a callback to ChainFind.find() ([#190](../../issues/190))
- Adds .findByX(...) to .hasOne(&#x22;X&#x22;, ...)
- Allow db.load() to work outside of module.exports
- Fix mysql driver for non-autoincrement key
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.singleton.get" id="apidoc.element.orm.singleton.get">
        function <span class="apidocSignatureSpan">orm.singleton.</span>get
        <span class="apidocSignatureSpan">(key, opts, createCb, returnCb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (key, opts, createCb, returnCb) {
	if (opts &#x26;&#x26; opts.identityCache === false) {
		return createCb(returnCb);
	}
	if (map.hasOwnProperty(key)) {
		if (opts &#x26;&#x26; opts.saveCheck &#x26;&#x26; typeof map[key].o.saved === &#x22;function&#x22; &#x26;&#x26; !map[key].o.saved()) {
			// if not saved, don&#x27;t return it, fetch original from db
			return createCb(returnCb);
		} else if (map[key].t !== null &#x26;&#x26; map[key].t &#x3c;= Date.now()) {
			delete map[key];
		} else  {
			return returnCb(null, map[key].o);
		}
	}

	createCb(function (err, value) {
		if (err) return returnCb(err);

		map[key] = { // object , timeout
			o : value,
			t : (opts &#x26;&#x26; typeof opts.identityCache === &#x22;number&#x22; ? Date.now() + (opts.identityCache * 1000) : null)
		};
		return returnCb(null, map[key].o);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Add `enumerable` flag to exclude instance properties from enumeration ([#724](../../issues/724))

### v3.0.0
- Rename `cache` -&#x3e; `identityCache` and **disable by default** ([#350](../../issues/350), [#564](../../issues/564), [#626](../../
issues/626), [#672](../../issues/672), [#684](../../issues/684), [#694](../../issues/694), [#721](../../issues/721))

**This is a potentially breaking change:**
```js
User.<span class="apidocCodeKeywordSpan">get</span>(14, (err, userA) =&#x3e;
User.get(14, (err, userB) =&#x3e;
  // v2
  userA    == userB
  userA.id == userB.id
  // v3, identity cache is now disabled by default
  userA    != userB
  userA.id == userB.id
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.orm.validators" id="apidoc.module.orm.validators">module orm.validators</a></h1>


    <h2>
        <a href="#apidoc.element.orm.validators.equalToProperty" id="apidoc.element.orm.validators.equalToProperty">
        function <span class="apidocSignatureSpan">orm.validators.</span>equalToProperty
        <span class="apidocSignatureSpan">(name, msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equalToProperty = function (name, msg) {
	return function (v, next) {
		if (v === this[name]) {
			return next();
		}
		return next(msg || &#x27;not-equal-to-property&#x27;);
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.insideList" id="apidoc.element.orm.validators.insideList">
        function <span class="apidocSignatureSpan">orm.validators.</span>insideList
        <span class="apidocSignatureSpan">(list, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inside(list, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;outside-list&#x27;; }
    return new Validator(function (value, next) {
        if (list.indexOf(value) &#x3e;= 0)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.notEmptyString" id="apidoc.element.orm.validators.notEmptyString">
        function <span class="apidocSignatureSpan">orm.validators.</span>notEmptyString
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notEmptyString(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;empty-string&#x27;; }

    return Ranges.length(1, undefined, message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.outsideList" id="apidoc.element.orm.validators.outsideList">
        function <span class="apidocSignatureSpan">orm.validators.</span>outsideList
        <span class="apidocSignatureSpan">(list, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function outside(list, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;inside-list&#x27;; }
    return new Validator(function (value, next) {
        if (list.indexOf(value) === -1)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.password" id="apidoc.element.orm.validators.password">
        function <span class="apidocSignatureSpan">orm.validators.</span>password
        <span class="apidocSignatureSpan">(checks, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function password(checks, message) {
    if (!message) {
        message = checks;
        checks = &#x22;luns6&#x22;;
    }

    if (!message) {
        message = &#x22;weak-password&#x22;;
    }

    var m = checks.match(/([0-9]+)/);
    var min_len = (m ? parseInt(m[1], 10) : null);

    return new Validator(function (value, next) {
        if (!value)
            return next(message);

        if (checks.indexOf(&#x22;l&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[a-z]/))
            return next(message);
        if (checks.indexOf(&#x22;u&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[A-Z]/))
            return next(message);
        if (checks.indexOf(&#x22;n&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[0-9]/))
            return next(message);
        if (checks.indexOf(&#x22;s&#x22;) &#x3e;= 0 &#x26;&#x26; !value.match(/[^a-zA-Z0-9]/))
            return next(message);
        if (min_len !== null &#x26;&#x26; min_len &#x3e; value.length)
            return next(message);

        return next();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Better association typing and multikey support

### v2.0.15 - 10 July 2013

- Support for &#x27;point&#x27; type as a property ([#221](../../issues/221))
- .call() in aggregates for generic functions ([#204](../../issues/204))
- Adds hook afterAutoFetch triggered after extending and auto fetching (if any) associations ([#219](../../issues/219))
- Adds predefined validator .<span class="apidocCodeKeywordSpan">password</span>()
- Adds ability to have the afterLoad hook blocking ([#219](../../issues/219))
- Changes Model.create() to wait for createInstance callback instead of using the returned value
- Fixes problem with hasOne associations for none persisted instances and autoFetch active just blocking
- Refactored Model.hasOne() constructor to be able to mix parameters
- Fixes reversed hasOne association on the reversed model not being correctly saved ([#216](../../issues/216))
- Changes Model.hasMany.addAccessor to throw just like .setAccessor when no associations are passed
- Adds ability to pass an Array to hasMany.hasAccessor and also not passing any instance to hasAccessor and have it check for any
 associated item
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.rangeLength" id="apidoc.element.orm.validators.rangeLength">
        function <span class="apidocSignatureSpan">orm.validators.</span>rangeLength
        <span class="apidocSignatureSpan">(min, max, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function length(min, max, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;out-of-range-length&#x27;; }
    return new Validator(function (value, next) {
        if (value === undefined || value === null)
            return next(&#x27;undefined&#x27;);
        if (min === undefined &#x26;&#x26; value.length &#x3c;= max)
            return next();
        if (max === undefined &#x26;&#x26; value.length &#x3e;= min)
            return next();
        if (value.length &#x3e;= min &#x26;&#x26; value.length &#x3c;= max)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.rangeNumber" id="apidoc.element.orm.validators.rangeNumber">
        function <span class="apidocSignatureSpan">orm.validators.</span>rangeNumber
        <span class="apidocSignatureSpan">(min, max, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function number(min, max, message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;out-of-range-number&#x27;; }
    return new Validator(function (value, next) {
        if (value === undefined || value === null)
            return next(&#x27;undefined&#x27;);
        if (min === undefined &#x26;&#x26; value &#x3c;= max)
            return next();
        if (max === undefined &#x26;&#x26; value &#x3e;= min)
            return next();
        if (value &#x3e;= min &#x26;&#x26; value &#x3c;= max)
            return next();
        return next(message);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.required" id="apidoc.element.orm.validators.required">
        function <span class="apidocSignatureSpan">orm.validators.</span>required
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function required(message) {
    if (typeof message === &#x22;undefined&#x22;) { message = &#x27;required&#x27;; }

    return new Validator(function (value, next) {
        if (value === null || value === undefined) {
            return next(message);
        }

        return next();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				break;
		}

		allProperties[prop.name]        = prop;
		fieldToPropertyMap[prop.mapsTo] = prop;

		if (prop.required) {
			model.prependValidation(prop.name, Validators.<span class="apidocCodeKeywordSpan">required</span>());
		}

		if (prop.key &#x26;&#x26; prop.klass == &#x27;primary&#x27;) {
			keyProperties.push(prop);
		}

		if (prop.lazyload !== true &#x26;&#x26; !currFields[prop.name]) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.orm.validators.unique" id="apidoc.element.orm.validators.unique">
        function <span class="apidocSignatureSpan">orm.validators.</span>unique
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unique = function () {
	var arg, k;
	var msg = null, opts = {};

	for (k in arguments) {
		arg = arguments[k];
		if (typeof arg === &#x22;string&#x22;) {
			msg = arg;
		} else if (typeof arg === &#x22;object&#x22;) {
			opts = arg;
		}
	}

	return function (v, next, ctx) {
		var s, scopeProp;

		if (typeof v === &#x22;undefined&#x22; || v === null) {
			return next();
		}

		//Cannot process on database engines which don&#x27;t support SQL syntax
		if (!ctx.driver.isSql) {
			return next(&#x27;not-supported&#x27;);
		}

		var chain = ctx.model.find();

		var chainQuery = function (prop, value) {
			var query = null;

			if (opts.ignoreCase === true &#x26;&#x26; ctx.model.properties[prop] &#x26;&#x26; ctx.model.properties[prop].type === &#x27;text&#x27;) {
				query = util.format(&#x27;LOWER(%s.%s) LIKE LOWER(?)&#x27;,
					ctx.driver.query.escapeId(ctx.model.table), ctx.driver.query.escapeId(prop)
				);
				chain.where(query, [value]);
			} else {
				query = {};
				query[prop] = value;
				chain.where(query);
			}
		};

		var handler = function (err, records) {
			if (err) {
				return next();
			}
			if (!records || records.length === 0) {
				return next();
			}
			if (records.length === 1 &#x26;&#x26; records[0][ctx.model.id] === this[ctx.model.id]) {
				return next();
			}
			return next(msg || &#x27;not-unique&#x27;);
		}.bind(this);

		chainQuery(ctx.property, v);

		if (opts.scope) {
			for (s in opts.scope) {
				scopeProp = opts.scope[s];

				// In SQL unique index land, NULL values are not considered equal.
				if (typeof ctx.instance[scopeProp] == &#x27;undefined&#x27; || ctx.instance[scopeProp] === null) {
					return next();
				}

				chainQuery(scopeProp, ctx.instance[scopeProp]);
			}
		}

		chain.all(handler);
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
